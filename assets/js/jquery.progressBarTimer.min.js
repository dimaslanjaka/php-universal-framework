(function(t,s,i,e){var n="progressBarTimer",a={timeLimit:60,warningThreshold:5,autoStart:!1,onFinish:function(){},baseStyle:"",warningStyle:"bg-warning",smooth:!1,completeStyle:"bg-danger",striped:!1,animated:!1,height:0,label:{show:!1,type:"percent"}};function r(s,i){this.element=s,this._name=n,this.settings=t.extend({},a,i),this._defaults=a,this._name=n,this.init()}t.extend(r.prototype,{init:function(){t(this).empty();var s=t("<div>").addClass("progress active progress-striped"),i=t("<div>").addClass("progress-bar").addClass(this.settings.baseStyle).attr("role","progressbar").attr("aria-valuenow","0").attr("aria-valuemin","0").attr("aria-valuemax",this.settings.timeLimit);this.settings.animated?(i.addClass("progress-bar-striped"),i.addClass("progress-bar-animated")):this.settings.striped&&i.addClass("progress-bar-striped"),this.settings.height&&s.height(this.settings.height),i.appendTo(s),s.appendTo(this.element),this.settings.smooth?(this.timerInterval=20,this.ticks=50*this.settings.timeLimit):(this.timerInterval=1e3,this.ticks=this.settings.timeLimit),this.remainingTicks=this.ticks,!0===this.settings.autoStart&&this.start(),this.bindEvents()},destroy:function(){this.unbindEvents(),this.element.removeData()},bindEvents:function(){},unbindEvents:function(){this.element.off("."+this._name)},start:function(){this.interval=setInterval(jQuery.proxy(this._draw,this),this.timerInterval)},reset:function(){clearInterval(this.interval),this.remainingTicks=this.ticks,this._draw()},stop:function(t){clearInterval(this.interval),t&&t()},getElapsedTime:function(){return this._getSecondsFromTicks(this.ticks-this.remainingTicks)},getRemainingTime:function(){return this._getSecondsFromTicks(this.remainingTicks)},addSeconds:function(t){var s=_getTicksFromSeconds(t);this.ticks+=s,this.remainingTicks+=s},_getTicksFromSeconds:function(t){return this.settings.smooth?50*t:t},_getSecondsFromTicks:function(t){return this.settings.smooth?t/50:t},_draw:function(){var s=t(this.element).find(".progress-bar"),i=this.ticks-this.remainingTicks,e=i/this.ticks*100;s.width(e+"%"),this.settings.label&&!0===this.settings.label.show&&("percent"==this.settings.label.type?s.html(Math.round(e)+"%"):!0===this.settings.smooth?s.html(Math.round(i/50)+"/"+Math.round(this.ticks/50)):s.html(i+"/"+this.ticks)),--this.remainingTicks,this._getSecondsFromTicks(this.remainingTicks)<=this.settings.warningThreshold&&!s.hasClass(this.settings.warningStyle)&&s.removeClass(this.settings.baseStyle).addClass(this.settings.warningStyle),0===this.remainingTicks&&(this.stop(),s.removeClass(this.settings.baseStyle).removeClass(this.settings.warningStyle).addClass(this.settings.completeStyle),s.width("100%"),this.settings.onFinish())}}),t.fn.progressBarTimer=function(s){var i;return this.each((function(){i=t.data(this,"plugin_"+n),i||(i=new r(this,s),t.data(this,"plugin_"+n,i))})),i}})(jQuery,window,document);