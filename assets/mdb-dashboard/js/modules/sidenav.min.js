"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(function(t){var e=240,i=1440,n=2,s=.3,o=-.5,a=-.3,l=.5,r=10,u=300,h=200,c=50,d=200,v="easeOutQuad",p="easeOutCubic",f=!0,m=!1,y=function(){function y(n,s){_classCallCheck(this,y),this.defaults={MENU_WIDTH:e,edge:"left",closeOnClick:!1,breakpoint:i,timeDurationOpen:u,timeDurationClose:h,timeDurationOverlayOpen:c,timeDurationOverlayClose:d,easingOpen:v,easingClose:p,showOverlay:f,showCloseButton:m},this.$element=n,this.$elementCloned=n.clone().css({display:"inline-block",lineHeight:"24px"}),this.options=this.assignOptions(s),this.menuOut=!1,this.lastTouchVelocity={x:{startPosition:0,startTime:0,endPosition:0,endTime:0}},this.$body=t("body"),this.$menu=t("#".concat(this.$element.attr("data-activates"))),this.$sidenavOverlay=t("#sidenav-overlay"),this.$dragTarget=t('<div class="drag-target"></div>'),this.$body.append(this.$dragTarget),this.init()}return _createClass(y,[{key:"init",value:function(){this.setMenuWidth(),this.setMenuTranslation(),this.closeOnClick(),this.openOnClick(),this.bindTouchEvents(),this.showCloseButton(),this.inputOnClick()}},{key:"bindTouchEvents",value:function(){var t=this;this.$dragTarget.on("click",(function(){return t.removeMenu()})),this.$elementCloned.on("click",(function(){return t.removeMenu()})),this.$dragTarget.on("touchstart",(function(e){t.lastTouchVelocity.x.startPosition=e.touches[0].clientX,t.lastTouchVelocity.x.startTime=Date.now()})),this.$dragTarget.on("touchmove",this.touchmoveEventHandler.bind(this)),this.$dragTarget.on("touchend",this.touchendEventHandler.bind(this))}},{key:"touchmoveEventHandler",value:function(t){if("touchmove"===t.type){var e=t.touches[0],i=e.clientX;Date.now()-this.lastTouchVelocity.x.startTime>20&&(this.lastTouchVelocity.x.startPosition=e.clientX,this.lastTouchVelocity.x.startTime=Date.now()),this.disableScrolling();var n=0!==this.$sidenavOverlay.length;n||this.buildSidenavOverlay(),"left"===this.options.edge&&(i>this.options.MENU_WIDTH?i=this.options.MENU_WIDTH:i<0&&(i=0)),this.translateSidenavX(i),this.updateOverlayOpacity(i)}}},{key:"panEventHandler",value:function(t){if("touch"===t.gesture.pointerType){var e=t.gesture.center.x;this.disableScrolling();var i=0!==this.$sidenavOverlay.length;i||this.buildSidenavOverlay(),"left"===this.options.edge&&(e>this.options.MENU_WIDTH?e=this.options.MENU_WIDTH:e<0&&(e=0)),this.translateSidenavX(e),this.updateOverlayOpacity(e)}}},{key:"translateSidenavX",value:function(t){if("left"===this.options.edge){var e=t>=this.options.MENU_WIDTH/n;this.menuOut=e,this.$menu.css("transform","translateX(".concat(t-this.options.MENU_WIDTH,"px)"))}else{var i=t<window.innerWidth-this.options.MENU_WIDTH/n;this.menuOut=i;var s=t-this.options.MENU_WIDTH/n;s<0&&(s=0),this.$menu.css("transform","translateX(".concat(s,"px)"))}}},{key:"updateOverlayOpacity",value:function(t){var e;e="left"===this.options.edge?t/this.options.MENU_WIDTH:Math.abs((t-window.innerWidth)/this.options.MENU_WIDTH),this.$sidenavOverlay.velocity({opacity:e},{duration:10,queue:!1,easing:this.options.easingOpen})}},{key:"buildSidenavOverlay",value:function(){var e=this;!0===this.options.showOverlay&&(this.$sidenavOverlay=t('<div id="sidenav-overlay"></div>'),this.$sidenavOverlay.css("opacity",0).on("click",(function(){return e.removeMenu()})),this.$body.append(this.$sidenavOverlay))}},{key:"disableScrolling",value:function(){var t=this.$body.innerWidth();this.$body.css("overflow","hidden"),this.$body.width(t)}},{key:"touchendEventHandler",value:function(t){if("touchend"===t.type){var e=t.changedTouches[0];this.lastTouchVelocity.x.endTime=Date.now(),this.lastTouchVelocity.x.endPosition=e.clientX;var i=this.calculateTouchVelocityX(),u=e.clientX,h=u-this.options.MENU_WIDTH,c=u-this.options.MENU_WIDTH/n;h>0&&(h=0),c<0&&(c=0),"left"===this.options.edge?(this.menuOut&&i<=s||i<o?(0!==h&&this.translateMenuX([0,h],"300"),this.showSidenavOverlay()):(!this.menuOut||i>s)&&(this.enableScrolling(),this.translateMenuX([-1*this.options.MENU_WIDTH-r,h],"200"),this.hideSidenavOverlay()),this.$dragTarget.css({width:"10px",right:"",left:0})):this.menuOut&&i>=a||i>l?(this.translateMenuX([0,c],"300"),this.showSidenavOverlay(),this.$dragTarget.css({width:"50%",right:"",left:0})):(!this.menuOut||i<a)&&(this.enableScrolling(),this.translateMenuX([this.options.MENU_WIDTH+r,c],"200"),this.hideSidenavOverlay(),this.$dragTarget.css({width:"10px",right:0,left:""}))}}},{key:"calculateTouchVelocityX",value:function(){var t=Math.abs(this.lastTouchVelocity.x.endPosition-this.lastTouchVelocity.x.startPosition),e=Math.abs(this.lastTouchVelocity.x.endTime-this.lastTouchVelocity.x.startTime);return t/e}},{key:"panendEventHandler",value:function(t){if("touch"===t.gesture.pointerType){var e=t.gesture.velocityX,i=t.gesture.center.x,u=i-this.options.MENU_WIDTH,h=i-this.options.MENU_WIDTH/n;u>0&&(u=0),h<0&&(h=0),"left"===this.options.edge?(this.menuOut&&e<=s||e<o?(0!==u&&this.translateMenuX([0,u],"300"),this.showSidenavOverlay()):(!this.menuOut||e>s)&&(this.enableScrolling(),this.translateMenuX([-1*this.options.MENU_WIDTH-r,u],"200"),this.hideSidenavOverlay()),this.$dragTarget.css({width:"10px",right:"",left:0})):this.menuOut&&e>=a||e>l?(this.translateMenuX([0,h],"300"),this.showSidenavOverlay(),this.$dragTarget.css({width:"50%",right:"",left:0})):(!this.menuOut||e<a)&&(this.enableScrolling(),this.translateMenuX([this.options.MENU_WIDTH+r,h],"200"),this.hideSidenavOverlay(),this.$dragTarget.css({width:"10px",right:0,left:""}))}}},{key:"translateMenuX",value:function(t,e){this.$menu.velocity({translateX:t},{duration:"string"===typeof e?Number(e):e,queue:!1,easing:this.options.easingOpen})}},{key:"hideSidenavOverlay",value:function(){this.$sidenavOverlay.velocity({opacity:0},{duration:this.options.timeDurationOverlayClose,queue:!1,easing:this.options.easingOpen,complete:function(){t(this).remove()}})}},{key:"showSidenavOverlay",value:function(){this.$sidenavOverlay.velocity({opacity:1},{duration:this.options.timeDurationOverlayOpen,queue:!1,easing:this.options.easingOpen})}},{key:"enableScrolling",value:function(){this.$body.css({overflow:"",width:""})}},{key:"openOnClick",value:function(){var e=this;this.$element.on("click",(function(i){if(i.preventDefault(),!0===e.menuOut)e.removeMenu();else{e.menuOut=!0,!0===e.options.showOverlay?t("#sidenav-overlay").length||(e.$sidenavOverlay=t('<div id="sidenav-overlay"></div>'),e.$body.append(e.$sidenavOverlay)):e.showCloseButton();var n=[];n="left"===e.options.edge?[0,-1*e.options.MENU_WIDTH]:[0,e.options.MENU_WIDTH],"matrix(1, 0, 0, 1, 0, 0)"!==e.$menu.css("transform")&&e.$menu.velocity({translateX:n},{duration:e.options.timeDurationOpen,queue:!1,easing:e.options.easingOpen}),e.$sidenavOverlay.on("click",(function(){return e.removeMenu()})),e.$sidenavOverlay.on("touchmove",e.touchmoveEventHandler.bind(e)),e.$menu.on("touchmove",(function(t){t.preventDefault(),e.$menu.find(".custom-scrollbar").css("padding-bottom","30px")})),e.menuOut=!0}}))}},{key:"closeOnClick",value:function(){var t=this;!0===this.options.closeOnClick&&(this.$menu.on("click","a:not(.collapsible-header)",(function(){return t.removeMenu()})),"translateX(0)"===this.$menu.css("transform")&&this.click((function(){return t.removeMenu()})))}},{key:"showCloseButton",value:function(){!0===this.options.showCloseButton&&(this.$menu.prepend(this.$elementCloned),this.$menu.find(".logo-wrapper").css({borderTop:"1px solid rgba(153,153,153,.3)"}))}},{key:"setMenuTranslation",value:function(){var e=this;"left"===this.options.edge?(this.$menu.css("transform","translateX(-100%)"),this.$dragTarget.css({left:0})):(this.$menu.addClass("right-aligned").css("transform","translateX(100%)"),this.$dragTarget.css({right:0})),this.$menu.hasClass("fixed")&&(window.innerWidth>this.options.breakpoint&&this.$menu.css("transform","translateX(0)"),this.$menu.find("input[type=text]").on("touchstart",(function(){e.$menu.addClass("transform-fix-input")})),t(window).resize((function(){if(window.innerWidth>e.options.breakpoint)e.$sidenavOverlay.length?e.removeMenu(!0):e.$menu.css("transform","translateX(0%)");else if(!1===e.menuOut){var t="left"===e.options.edge?"-100":"100";e.$menu.css("transform","translateX(".concat(t,"%)"))}})))}},{key:"setMenuWidth",value:function(){var i=t("#".concat(this.$menu.attr("id"))).find("> .sidenav-bg");this.options.MENU_WIDTH!==e&&(this.$menu.css("width",this.options.MENU_WIDTH),i.css("width",this.options.MENU_WIDTH))}},{key:"inputOnClick",value:function(){var t=this;this.$menu.find("input[type=text]").on("touchstart",(function(){return t.$menu.css("transform","translateX(0)")}))}},{key:"assignOptions",value:function(e){return t.extend({},this.defaults,e)}},{key:"removeMenu",value:function(t){var e=this;this.$body.css({overflow:"",width:""}),this.$menu.velocity({translateX:"left"===this.options.edge?"-100%":"100%"},{duration:this.options.timeDurationClose,queue:!1,easing:this.options.easingClose,complete:function(){!0===t&&(e.$menu.removeAttr("style"),e.$menu.css("width",e.options.MENU_WIDTH))}}),this.$menu.hasClass("transform-fix-input")&&this.$menu.removeClass("transform-fix-input"),this.hideSidenavOverlay(),this.menuOut=!1}}]),y}();t.fn.sideNav=function(e){return this.each((function(){new y(t(this),e)}))}})(jQuery),$((function(t){t("#toggle").click((function(){t("#slide-out").hasClass("slim")?(t("#slide-out").removeClass("slim"),t(".sv-slim-icon").removeClass("fa-angle-double-right").addClass("fa-angle-double-left"),t(".fixed-sn .double-nav").css({transition:"all .3s ease-in-out","padding-left":"15.9rem"}),t(".fixed-sn main").css({transition:"all .3s ease-in-out","padding-left":"15rem"}),t(".fixed-sn footer").css({transition:"all .3s ease-in-out","padding-left":"15rem"})):(t("#slide-out").addClass("slim"),t(".sv-slim-icon").removeClass("fa-angle-double-left").addClass("fa-angle-double-right"),t(".fixed-sn .double-nav").css("padding-left","4.6rem"),t(".fixed-sn main").css("padding-left","3.7rem"),t(".fixed-sn footer").css("padding-left","3.7rem"))}))}));