(function(i){"use strict";var t=function(n,a){this.$element=i(n),this.$children=this.$element.children(),this.options=i.extend({},t.DEFAULTS,a),this._time=t.TRANSITION_DURATION*this.options.speed,this.init(),!0===this.options.debug&&this._debug()};function n(n){return this.each((function(){var a=i(this),e=a.data("zmd.hierarchicalDisplay"),o=i.extend({},t.DEFAULTS,a.data(),"object"===typeof n&&n);return e||a.data("zmd.hierarchicalDisplay",e=new t(this,o)),"string"===typeof n?e[n]():o.action in e?e[o.action]():void 0}))}t.VERSION="1.0.1",t.TRANSITION_DURATION=300,t.DEFAULTS={action:"show",speed:5,animationIn:"zoomedIn",animationOut:"zoomedOut",debug:!1},t.prototype.init=function(){var t,n,a,e=this,o=this.$element,s=this.$children,h=this.options,l=this._time;o.addClass("zmd-hierarchical-display"),s.each((function(){t=i(this).position(),n=.8*t.left+t.top,a=parseFloat(n/l).toFixed(2),i(this).css("-webkit-animation-delay",a+"s").css("animation-delay",a+"s")})),this._delay=a,s.last().on("webkitAnimationEnd animationend",(function(){i(this).hasClass(h.animationOut)&&e._complete("hidden"),i(this).hasClass(h.animationIn)&&e._complete("shown")}))},t.prototype.show=function(){var t=this.$element,n=(this.$children,this.options);t.hasClass("in")||t.hasClass("zmd-hierarchical-displaying")||(this._removeAnimations(),t.trigger(i.Event("show.zmd.hierarchicalDisplay")),this._addAnimation(n.animationIn))},t.prototype.hide=function(){var t=this.$element,n=(this.$children,this.options);"hidden"===t.css("visibility")||t.hasClass("zmd-hierarchical-displaying")||(this._removeAnimations(),t.trigger(i.Event("hide.zmd.hierarchicalDisplay")),this._addAnimation(n.animationOut))},t.prototype.toggle=function(){return this.$element.hasClass("in")?this.hide():this.show()},t.prototype._removeAnimations=function(){var t=this.options;this.$children.each((function(){i(this).removeClass(t.animationIn).removeClass(t.animationOut)}))},t.prototype._addAnimation=function(t){this.$element.addClass("zmd-hierarchical-displaying"),this.$children.each((function(){i(this).addClass(t).addClass("animation")}))},t.prototype._complete=function(t){this.$element.removeClass("zmd-hierarchical-displaying").toggleClass("in").trigger(i.Event(t+".zmd.hierarchicalDisplay"))},t.prototype._debug=function(){i(document).on("show.zmd.hierarchicalDisplay",(function(i){console.log('Event "show.zmd.hierarchicalDisplay". For more information see:'),console.log(i)})).on("shown.zmd.hierarchicalDisplay",(function(i){console.log('Event "shown.zmd.hierarchicalDisplay". For more information see:'),console.log(i)})).on("hide.zmd.hierarchicalDisplay",(function(i){console.log('Event "hide.zmd.hierarchicalDisplay". For more information see:'),console.log(i)})).on("hidden.zmd.hierarchicalDisplay",(function(i){console.log('Event "hidden.zmd.hierarchicalDisplay". For more information see:'),console.log(i)}))},i.fn.hierarchicalDisplay=n,i.fn.hierarchicalDisplay.Constructor=t,i(document).on("ready",(function(){i('[data-animation="hierarchical-display"]').each((function(){n.call(i(this))}))})),i(document).on("click",'[data-toggle="hierarchical-display"]',(function(t){var a=i(this),e=i(a.attr("data-target")||a.attr("href"));a.is("a")&&t.preventDefault(),n.call(e,"toggle")}))})(jQuery);