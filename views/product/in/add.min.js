(function(){smartform(),$(document).on("submit","form",(function(e){e.preventDefault(),jAjax({url:location.href,data:$(this).serialize(),method:"POST",success:function(e){console.log(e),e.success?(toastr.success("Update Successful","Success"),location.href="/product/in"):toastr.error("Update Failed","Failed")}})})),$(".select2-product").select2({placeholder:"Select a product",width:null,ajax:{url:"/product/fetch",dataType:"json",data:function(e){return{search:e.term}},processResults:function(e,t){var s=$.map(e,(function(e){return e.text=e.product_name,e.id=e.product_id,e}));return{results:s}}},escapeMarkup:function(e){return e},templateSelection:function(e){return e.text},templateResult:function(e){if(e.loading)return e.text;var t="<div class='select2-result-repository clearfix'><div class='select2-result-repository__avatar'><img src='"+e.product_image+"' /></div><div class='select2-result-repository__meta'><div class='select2-result-repository__title'>"+`<b>${e.code}</b> `+e.product_name+"</div>";return e.product_alias&&(t+="<div class='select2-result-repository__description'>"+e.product_alias+"</div>"),t+="<div class='select2-result-repository__statistics "+(0==e.quantity?"text-danger":"")+"'><div class='select2-result-repository__forks'><i class='fa fa-box'></i> "+e.quantity+"</div><div class='select2-result-repository__stargazers'><i class='fa fa-tag'></i> "+e.brand_name+"</div><div class='select2-result-repository__watchers'><i class='fa fa-tags'></i> "+e.categories_name+"</div></div></div></div>",t}}),$(".select2-producer").select2({placeholder:"Select a producer",width:null,ajax:{url:"/producer/fetch",dataType:"json",data:function(e){return{search:e.term}},processResults:function(e,t){var s=$.map(e,(function(e){return e.text=e.name,e}));return{results:s}}},escapeMarkup:function(e){return e},templateSelection:function(e){return e.text},templateResult:function(e){return`<div class="select2-result-repository clearfix">\n      <small><b>${e.text}</b><br/><i>${e.address}</i></small>\n      </div>`}})})();