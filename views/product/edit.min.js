function preview(e){$("#imagePreview").css("background-image","url("+e+")"),$("#imagePreview").hide(),$("#imagePreview").fadeIn(650),$("#image2up").val(e)}function readURL(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){preview(e.target.result)},t.readAsDataURL(e.files[0])}}function isValidHttpUrl(e){let t;try{t=new URL(e)}catch(a){return!1}return"http:"===t.protocol||"https:"===t.protocol}function url2base64(e,t){var a=new XMLHttpRequest;a.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(a.response)},a.open("GET",e),a.responseType="blob",a.send()}$(document).on("submit","form",(function(e){e.preventDefault(),jAjax({url:location.href,data:$(this).serialize(),method:"POST",success:function(e){console.log(e),e.success?(toastr.success("Update Successful","Success"),location.href="/product"):toastr.error("Update Failed","Failed")}})})),$("#imageUpload").change((function(){readURL(this)})),$("[id^='urlImage']").on("input, change, keyup",(function(e){e.preventDefault();var t=$(this).val();t.length>0&&isValidHttpUrl(t)&&url2base64(t,(function(e){e.startsWith("data:image/")&&preview(e)}))}));