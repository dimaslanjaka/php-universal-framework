(function($){function is_collapsable(l){return l instanceof Object&&Object.keys(l).length>0}function json2html(l){if(html="","string"===typeof l)html+='<span class="json-string">"'+l+'"</span>';else if("number"===typeof l)html+='<span class="json-number">'+l+"</span>";else if("boolean"===typeof l)html+='<span class="json-boolean">'+l+"</span>";else if(null===l)html+='<span class="json-null">null</span>';else if(l instanceof Array)if(l.length>0){for(var s in html+='[<ol class="json-array">',l)html+="<li>",is_collapsable(l[s])&&(html+='<a href class="json-toggle"></a>'),html+=json2html(l[s]),s<l.length-1&&(html+=","),html+="</li>";html+="</ol>]"}else html+="[]";else if("object"===typeof l){var n=Object.keys(l).length;if(n>0){for(var s in html+='{<ul class="json-dict">',l)l.hasOwnProperty(s)&&(html+="<li>",is_collapsable(l[s])&&(html+='<a href class="json-toggle"></a>'),html+='"'+s+'": '+json2html(l[s]),--n>0&&(html+=","),html+="</li>");html+="</ul>}"}else html+="{}"}return html}if("undefined"==typeof is_json)function is_json(l){try{JSON.parse(l)}catch(s){return!1}return!0}$.fn.json_viewer=function(json){return is_json(json)&&(json=eval("("+json+")")),this.attr("title","JSON result"),this.each((function(){var l=json2html(json);is_collapsable(json)&&(l='<a href class="json-toggle"></a>'+l),$(this).unbind("click"),$.fn.html.call($(this),l),$(this).on("click","a.json-toggle",(function(){var l=$(this).toggleClass("collapsed").siblings("ul.json-dict, ol.json-array");l.toggle();var s=l.children("li").length;if(l.is(":visible"))l.siblings(".json-placeholder").remove();else{var n=s+(s>1?" items":" item");l.after('<span class="json-placeholder">'+n+"</span>")}return!1}))}))}})(jQuery);