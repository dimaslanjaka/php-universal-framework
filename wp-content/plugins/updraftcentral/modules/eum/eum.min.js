function UpdraftCentral_EUM_Management(){var o,c=this,d=jQuery,s=new UpdraftCentral_Collection,i=(UpdraftCentral.get_debug_level(),"Easy Updates Manager"),l="Easy Updates Manager Premium",e=d("#updraftcentral_dashboard_existingsites"),u={};function f(e,t,a){var n,r=!1,i=!1,l=a;return o=a,e||(r=!0,-1!==l.indexOf("Premium")&&(l=l.replace(" Premium",""))),!t&&e&&(i=!0),n={action:{install_and_activate:r,activate:i,messages:{not_installed:vsprintf(udclion.plugin_not_installed,[l]),install_and_activate:udclion.plugin_install_and_activate,not_activated:vsprintf(udclion.plugin_not_activated,[o]),activate:udclion.plugin_activate}}},UpdraftCentral.template_replace("eum-eum-not_active",n)}function t(t,a){var n="",r=p(t);UpdraftCentral.set_loading(r),h(t,i).then(function(e){e.installed&&e.active?c.load_contents(t,a):(c.current_section=a,e.active?!e.active&&e.installed&&(n=f(e.installed,e.active,i),UpdraftCentral.done_loading(r,n)):h(t,l).then(function(e){e.installed&&e.active?c.load_contents(t,a):(n=f(e.installed,e.active,l),UpdraftCentral.done_loading(r,n))}).fail(function(e){_(e),UpdraftCentral.done_loading(r,n)}))}).fail(function(e){_(e),UpdraftCentral.done_loading(r,n)})}function p(e){var t=e.find(".updraftcentral_row_extracontents"),a=t.find(".updraftcentral_eum_rows");return 0===a.length&&(a=d('<div class="updraftcentral_eum_rows"></div>').appendTo(t)),a}function _(e){if(void 0!==e.data){var t=e.data;if(null!==t&&void 0!==t.message){var a=udclion.eum[t.message];void 0===a&&void 0===(a=udclion[t.message])&&(a=udclion.unknown_response),void 0!==t.values?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+vsprintf(a,t.values)+"</p>"):UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+a+"</p>")}}}function g(e){var a="";return"object"==(e=void 0===e?"string":e)?a=d(".updraftcentral_eum_rows input[name!='action'], .updraftcentral_eum_rows textarea, .updraftcentral_eum_rows select").serializeJSON({useIntKeysAsArrayIndex:!0}):(a=d(".updraftcentral_eum_rows input[name!='action'], .updraftcentral_eum_rows textarea, .updraftcentral_eum_rows select").serialize(),d.each(d(".updraftcentral_eum_rows input[type=checkbox]").filter(function(e){return 0==d(this).prop("checked")}),function(e,t){a+="&"+d(t).attr("name")+"=0"})),a}function m(t,a){var n=d.Deferred();return UpdraftCentral.send_site_rpc("eum.get_version",{},a,function(e){"-1"==function(e,t,a){var n=a&&a.lexicographical||!1,r=a&&a.zero_extend||!0,i=(e||"0").split("."),l=(t||"0").split(".");function o(e){return(n?/^\d+[A-Za-zαß]*$/:/^\d+[A-Za-zαß]?$/).test(e)}if(!i.every(o)||!l.every(o))return NaN;if(r){for(;i.length<l.length;)i.push("0");for(;l.length<i.length;)l.push("0")}n||(i=i.map(function(e){var t=/[A-Za-zαß]/.exec(e);return Number(t?e.replace(t[0],"."+e.charCodeAt(t.index)):e)}),l=l.map(function(e){var t=/[A-Za-zαß]/.exec(e);return Number(t?e.replace(t[0],"."+e.charCodeAt(t.index)):e)}));for(var c=0;c<i.length;++c){if(l.length==c)return 1;if(i[c]!=l[c])return i[c]>l[c]?1:-1}return i.length!=l.length?-1:0}(e.data,"9.0.0")?(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.eum.plugin_name+"</h2><p>"+udclion.eum.version_incompatibility+"</p>"),UpdraftCentral.done_loading(a)):UpdraftCentral.send_site_rpc("eum."+t.name,t.arguments,a,function(e,t,a){"ok"!==t||void 0===e.data||null===e.data||e.data.error?n.reject(e):n.resolve(e.data)})}),n.promise()}function h(e,t){return UpdraftCentral.is_plugin_active(e,t)}function v(e,t){var a={},n=d("#current-page-selector");0===n.length&&(n=d("#table-paging"));var r=null;switch(void 0!==t&&(r=t.search.substring(1)),e){case"pagination":a.paged=b(r,"paged");break;case"pagination_input":case"bulk":case"save_settings":a.paged=parseInt(d("input[name=paged]").val())||"1"}return a.m=d("#filter-by-date").val(),a.status=d("#filter-by-success").val(),a.action_type=d("#filter-by-action").val(),a.type=d("#filter-by-type").val(),a.order=d("#filter-by-order").val(),a.data=g("string"),a.view=null!==r?(a.tab=b(r,"tab")||"",b(r,"view")||"all"):(a.tab=n.data("tab")||"",n.data("view")||"all"),a}function b(e,t){if(void 0===e||void 0===t)return!1;for(var a=e.split("&"),n=0;n<a.length;n++){var r=a[n].split("=");if(t===r[0])return r[1]}return!1}function w(e){var t=e.find(".eum_cron_schedule").val(),a=(e.find(".eum_cron_time"),e.find(".eum_week_number")),n=e.find(".eum_week_days"),r=e.find(".eum_day_number_wrapper");switch(t){case"twicedaily":case"daily":n.hide(),a.hide(),r.css("display","none");break;case"weekly":n.show(),a.hide(),r.css("display","none");break;case"fortnightly":n.show(),a.show(),r.css("display","none");break;case"monthly":n.hide(),a.hide(),r.css("display","inline-block")}}d("#updraft-central-content").scroll(function(){d("#eum-save-settings-warning").css("top",d(this).scrollTop()+100)}),e.on("updraftcentral_dashboard_mode_set_eum",function(){UpdraftCentral.register_row_clicker(".eum-dashboard-app .toggle-wrapper button",function(e,t,a){d("#eum-save-settings-warning").fadeIn("slow")},!0),UpdraftCentral.register_row_clicker(".updraftcentral_site_general",function(e){t(e,"general")},!0),UpdraftCentral.register_row_clicker(".eum-dashboard-app .eum-toggle-button",function(e,t,a){var n=d(a.currentTarget).parent();n.children(".eum-toggle-button").removeClass("eum-active");var r=d(a.currentTarget).attr("id").replace(/-/g,"_");r+="_status",n.prev().text(udclion.eum[r]),d(a.currentTarget).addClass("eum-active")},!0),UpdraftCentral.register_row_clicker(".updraftcentral_site_plugins",function(e){t(e,"plugins")},!0),UpdraftCentral.register_row_clicker(".updraftcentral_site_themes",function(e){t(e,"themes")},!0),UpdraftCentral.register_row_clicker(".updraftcentral_site_logs",function(e){t(e,"logs")},!0),UpdraftCentral.register_row_clicker(".updraftcentral_site_advanced",function(e){t(e,"advanced")},!0),UpdraftCentral.register_row_clicker(".tablenav-pages a",function(e,t,a){var n=v("pagination",a.currentTarget);c.load_contents(e,n.tab,{data:n})},!0),UpdraftCentral.register_row_clicker("input[name=paged]",function(t,e,a){13!==a.which?window.setTimeout(function(){var e=v("pagination_input");c.load_contents(t,e.tab,{data:e})},500):a.preventDefault()},!0,"keyup"),UpdraftCentral.register_row_clicker(".subsubsub a",function(e,t,a){d(".subsubsub a").removeClass("current"),d(a.currentTarget).addClass("current");var n=v("filters",a.currentTarget);c.load_contents(e,n.tab,{data:n})},!0);UpdraftCentral.register_row_clicker([".toggle-wrapper-plugins .eum-toggle-button",".toggle-wrapper-plugins-automatic .eum-toggle-button",".toggle-wrapper-themes .eum-toggle-button",".toggle-wrapper-themes-automatic .eum-toggle-button"].join(", "),function(e,t,a){var n=v(),r=d(a.currentTarget),i=r.closest(".toggle-wrapper").find("input"),l=r.closest(".toggle-wrapper"),o=l.closest(".eum-"+n.tab+"-name-actions").find(".eum-"+n.tab+"-automatic-wrapper");r.addClass("eum-active"),r.hasClass("eum-enabled")?(r.next().removeClass("eum-active"),i.prop("value","true"),l.hasClass("toggle-wrapper-"+n.tab)&&(o.find("input").prop("value",!1),o.find(".eum-disabled").addClass("eum-active"),o.find(".eum-enabled").removeClass("eum-active"),o.slideDown())):(l.hasClass("toggle-wrapper-"+n.tab)&&o.slideUp(),r.prev().removeClass("eum-active"),i.prop("value","false"),o.find("input").prop("value",!1)),d("#eum-save-settings-warning").fadeIn()},!0),UpdraftCentral.register_row_clicker("#eum-save-settings",function(e,t,a){var n=v("save_settings");c.load_contents(e,"save_"+n.tab+"_update_options",{data:n})},!0),UpdraftCentral.register_row_clicker("#eum-save-general-settings",function(e,t,a){var n,r={};r.data=(n=[],d(".eum-active").each(function(e){var t=d(this).attr("id");n.push(t)}),n),c.load_contents(e,"save_general_options",{data:r})},!0),UpdraftCentral.register_row_clicker("#save-logs-settings",function(e){m({name:"save_logs_settings",arguments:g("string")},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>")}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#eum-save-emails",function(e){m({name:"save_notification_emails",arguments:d.trim(d("#notification-emails").val())},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>")}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#cb-select-all-1, #cb-select-all-2",function(e,t,a){d(a.currentTarget).is(":checked")?("cb-select-all-1"===a.currentTarget.id?d("#cb-select-all-2").prop("checked",!0):d("#cb-select-all-1").prop("checked",!0),e.find("input[name*=checked]").prop("checked",!0)):(d("#cb-select-all-1, #cb-select-all-2").prop("checked",!1),e.find("input[name*=checked]").prop("checked",!1))},!0,"change"),UpdraftCentral.register_row_clicker("#doaction, #doaction2",function(e,t,a){if(0!==e.find("input:checked").length){var n=v("bulk");c.load_contents(e,"bulk_action_"+n.tab+"_update_options",{data:n}),d("#bulk-action-selector-top, #bulk-action-selector-bottom").val("-1")}},!0),UpdraftCentral.register_row_clicker("#post-query-submit",function(e,t,a){var n=v();c.load_contents(e,n.tab,{data:n})},!0),UpdraftCentral.register_row_clicker("#filter-by-date, #filter-by-success, #filter-by-action, #filter-by-type, #filter-by-order",function(e,t,a){var n=v();c.load_contents(e,n.tab,{data:n})},!0,"change"),UpdraftCentral.register_event_handler("click","#log-query-search",function(e){var t=v();return t.is_search=!0,t.search_term=jQuery("#eum-log-search").val(),t.view="search",c.load_contents($site_row,t.tab,{data:t}),!1}),UpdraftCentral.register_row_clicker("#form-disable-logs",function(e,t,a){var n=v();n.disable_logs=!0,c.load_contents(e,n.tab,{data:n})},!0),UpdraftCentral.register_row_clicker("#form-enable-logs",function(e,t,a){var n={tab:"logs",enable_logs:!0};c.load_contents(e,n.tab,{data:n})},!0),UpdraftCentral.register_row_clicker(".eum_logger_type input",function(e,t,a){e.find(".eum_logger_type").each(function(e,t){!0===d("input",t)[0].checked?d(".eum_logger_additional_options",t).show():d(".eum_logger_additional_options",t).hide()})},!0,"change"),UpdraftCentral.register_row_clicker("#btn-eum-activate",function(t){var e,a,n=p(t);UpdraftCentral.set_loading(n),(e=t,a=o,UpdraftCentral.activate_plugin(e,a)).then(function(e){e.activated&&c.load_contents(t,c.current_section)}).fail(function(e){_(e),UpdraftCentral.done_loading(n)})},!0),UpdraftCentral.register_row_clicker("#btn-eum-install-activate",function(t){var e,a,n,r=p(t);UpdraftCentral.set_loading(r),(e=t,a=i,n="stops-core-theme-and-plugin-updates",UpdraftCentral.install_activate_plugin(e,a,n)).then(function(e){(e.installed||e.activated)&&c.load_contents(t,c.current_section)}).fail(function(e){_(e),UpdraftCentral.done_loading(r)})},!0),UpdraftCentral.register_row_clicker("#force-updates",function(e){m({name:"force_updates",arguments:{}},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e.message+"</p>")}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#save-excluded-users",function(e){m({name:"save_excluded_users",arguments:g("string")},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>")}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#eum_ud_enable_auto_backup",function(a){m({name:"enable_auto_backup",arguments:{}},a).then(function(e){if(void 0!==e&&!1!==e){UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>");var t=a.find("#eum_ud_enable_auto_backup");a.find("#eum-auto-backup-description").text(udclion.eum.enabled_auto_backup_description),t.prop("id","eum_ud_disable_auto_backup"),t.val(udclion.eum.disable_auto_backup)}}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#eum_ud_disable_auto_backup",function(a){m({name:"disable_auto_backup",arguments:{}},a).then(function(e){if(void 0!==e&&!1!==e){UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>");var t=a.find("#eum_ud_disable_auto_backup");a.find("#eum-auto-backup-description").text(udclion.eum.disabled_auto_backup_description),t.prop("id","eum_ud_enable_auto_backup"),t.val(udclion.eum.enable_auto_backup)}}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker(".eum_cron_schedule",function(e){w(e)},!0,"change"),UpdraftCentral.register_row_clicker("#save-cron-schedule",function(t){m({name:"save_cron_schedule",arguments:g("string")},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+udclion.eum.update_cron_scheduled+"</p>"),t.find("#eum-next-cron-schedule").html(e.time))}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#save-delay-updates",function(e){var t={name:"save_delay_updates",arguments:g("string")},a=parseInt(d("#delay-updates").val());Number.isInteger(a)&&0<=a&&m(t,e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>")}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#save-anonymize-update-option",function(e){m({name:"save_anonymize_updates",arguments:g("string")},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>")}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#eum-settings-export",function(o){m({name:"export_settings",arguments:{}},o).then(function(e){if(void 0!==e&&!1!==e){var t=o[0].dataset.site_description.toLowerCase().replace(/ /g,"-"),a=new Date,n=a.getUTCMonth()+1,r=a.getUTCDate(),i=t+"-"+(a.getUTCFullYear()+"-"+n+"-"+r)+".json",l=document.body.appendChild(document.createElement("a"));l.setAttribute("download",i),l.setAttribute("style","display:none;"),l.setAttribute("href","data:text/json;charset=UTF-8,"+encodeURIComponent(e)),l.click()}}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#eum-settings-import",function(t){var e=t.find("#import_settings")[0];if(0!==e.files.length){var a=e.files[0],n=new FileReader;n.onload=function(){var e=function(t){try{var e=JSON.parse(t);return e}catch(e){console.log("UC: Exception when trying to parse JSON (1) - will attempt to fix/re-parse"),console.log(t)}var a=t.indexOf("{"),n=t.lastIndexOf("}");if(-1<a&&-1<n){var r=t.slice(a,n+1);try{var i=JSON.parse(r);return console.log("UC: JSON re-parse successful"),i}catch(e){console.log("UC: Exception when trying to parse JSON (2) - will attempt to fix/re-parse based upon bracket counting");for(var l=a,o=0,c="",d=!1;(0<o||l==a)&&l<=n;){var s=t.charAt(l);d||"{"!=s?d||"}"!=s?'"'==s&&"\\"!=c&&(d=!d):o--:o++,c=s,l++}console.log("Started at cursor="+a+", ended at cursor="+l+" with result following:"),console.log(t.substring(a,l));try{var i=JSON.parse(t.substring(a,l));return console.log("UC: JSON re-parse successful"),i}catch(e){throw e}}}throw"UC: could not parse the JSON"}(this.result);if(e.meta.site_url+"/"!==t[0].dataset.site_url&&!confirm(udclion.eum.import_confirmation))return;m({name:"import_settings",arguments:{data:e.data}},t).then(function(e){UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>")}).fail(function(e){_(e)})},n.readAsText(a)}else alert(udclion.eum.import_select_file)},!0),UpdraftCentral.register_row_clicker("#enable-logs",function(e){m({name:"enable_logs",arguments:{}},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>")}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#clear-logs",function(e){m({name:"clear_logs",arguments:{}},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>")}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#enable-webhook,#refresh-webhook",function(t){m({name:"enable_webhook",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e.message+"</p>"),t.find("#eum-webhook-url").val(e.hook_url),t.find("#eum-webhook-url-wrapper").removeClass("eum-hidden"),t.find("#eum-webhook-copy").html(udclion.eum.webhook_copy),$enableButton=t.find("#enable-webhook"),$enableButton.attr("id","disable-webhook"),$enableButton.val(udclion.eum.webhook_disable))}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#whitelist-save",function(e){m({name:"whitelist_save",arguments:{data:{plugin_name:d("#eum-whitelabel-text").val(),plugin_author:d("#eum-whitelabel-author").val(),plugin_url:d("#eum-whitelabel-url").val(),notices:d("#whitelist-notices").is(":checked")}}},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>")}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#whitelist-reset",function(t){m({name:"whitelist_reset",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e.message+"</p>"),t.find("#eum-whitelabel-text").val(e.name),t.find("#eum-whitelabel-author").val(e.author),t.find("#eum-whitelabel-url").val(e.url),t.find("#whitelist-notices").prop("checked","checked"))}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#eum-webhook-copy",function(e){document.getElementById("eum-webhook-url").select(),document.execCommand("copy"),e.find("#eum-webhook-copy").html(udclion.eum.webhook_copied)},!0),UpdraftCentral.register_row_clicker("#disable-webhook",function(t){m({name:"disable_webhook",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#eum-webhook-url-wrapper").addClass("eum-hidden"),t.find("#eum-webhook-url").val(""),$disableButton=t.find("#disable-webhook"),$disableButton.attr("id","enable-webhook"),$disableButton.val(udclion.eum.webhook_enable))}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#enable-safe-mode",function(t){m({name:"enable_safe_mode",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#enable-safe-mode").val(udclion.eum.disable_safe_mode),t.find("#enable-safe-mode").attr("id","disable-safe-mode"))}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#disable-safe-mode",function(t){m({name:"disable_safe_mode",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#disable-safe-mode").val(udclion.eum.enable_safe_mode),t.find("#disable-safe-mode").attr("id","enable-safe-mode"))}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#eum-check-plugins",function(a){var e=!1;a.find("#eum-check-plugins-force").is(":checked")&&(e=!0),a.find("#eum-check-plugins-status").css("display","none"),m({name:"check_plugins",arguments:{force:e}},a).then(function(e){if(void 0!==e&&!1!==e){UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e.message+"</p>");var t=a.find("#eum-check-plugins-status");a.find("#eum-check-plugins-force").prop("checked",!1),e.errors?t.css("display","block").removeClass("mpsum-notice").addClass("mpsum-error").html(e.message):t.css("display","block").removeClass("mpsum-error").addClass("mpsum-notice").html(e.message)}}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#reset-options",function(e){m({name:"reset_options",arguments:{}},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>")}).fail(function(e){_(e)})}),UpdraftCentral.register_row_clicker("#enable-version-control",function(t){m({name:"enable_version_control",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#enable-version-control").val(udclion.eum.disable_version_control),t.find("#enable-version-control").attr("id","disable-version-control"))}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#disable-version-control",function(t){m({name:"disable_version_control",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#disable-version-control").val(udclion.eum.enable_version_control),t.find("#disable-version-control").attr("id","enable-version-control"))}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#enable-unmaintained-plugins-check",function(t){m({name:"enable_unmaintained_plugins_check",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#enable-unmaintained-plugins-check").val(udclion.eum.disable_unmaintained_plugin_check),t.find("#enable-unmaintained-plugins-check").attr("id","disable-unmaintained-plugins-check"))}).fail(function(e){_(e)})},!0),UpdraftCentral.register_row_clicker("#disable-unmaintained-plugins-check",function(t){m({name:"disable_unmaintained_plugins_check",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#disable-unmaintained-plugins-check").val(udclion.eum.enable_unmaintained_plugin_check),t.find("#disable-unmaintained-plugins-check").attr("id","enable-unmaintained-plugins-check"))}).fail(function(e){_(e)})},!0)}),this.save_settings=function(e){var t,a,n,r,i=p(e),l=g();UpdraftCentral.set_loading(i),(a=l,n=e,r=d.Deferred(),m({name:"save_settings",arguments:a},n).then(function(e){r.resolve(e)}).fail(function(e){r.reject(e)}),r.promise()).then(function(e){void 0!==e.save_results&&(t=e.save_results)}).fail(function(e){_(e)}).always(function(){UpdraftCentral.done_loading(i).then(function(){void 0!==t&&(void 0!==t.errors&&t.errors.length?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.eum.save_settings_heading+"</h2><p>"+t.errors[0]+"</p>"):(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.eum.save_settings_heading+"</h2><p>"+t.messages[0]+"</p>"),c.load_contents(e,"settings")))})})},this.load_contents=function(t,n,e){-1!==["general","plugins","themes","logs","advanced"].indexOf(n)&&(n="get_"+n+"_contents"),void 0===e&&(e={});var r="",i=p(t),a="site_"+t.data("site_id");if(!s.exists(a)){var l=new UpdraftCentral_Site(t);s.add(a,l)}var o={name:n,arguments:e};UpdraftCentral.set_loading(i),m(o,t).then(function(e){void 0!==e&&(r=e)}).fail(function(e){var t=_(e);void 0!==t&&t.length&&(r=t)}).always(function(){if("get_general_contents"===n||"save_general_options"===n){if("string"==typeof r)return void UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+r+"</p>");var e=r;return a=e,d.each(a,function(e,t){"email_addresses"==e&&(u=a[e],delete a[e])}),r=UpdraftCentral.template_replace("eum-general",{eum:udclion.eum,options:a}),"off"===e.logs?t.find(".updraftcentral_site_logs").hide():t.find(".updraftcentral_site_logs").show(),void UpdraftCentral.done_loading(i,r).then(function(){d("#notification-emails").prop("value",u),function(e){for(var t in e){"automatic_updates"===t&&"unset"===e[t]&&(e[t]="default");var a=t.replace(/_/g,"-")+"-"+e[t];d("#"+a).addClass("eum-active")}}(e)})}var a;UpdraftCentral.done_loading(i,r).then(function(){r&&r.length?(UpdraftCentral.register_event_handler("click",".updraftcentral_eum_rows #force-updates",function(){m({name:"force_updates",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&console.log(e)})}),w(t),jQuery("p.submit").css("display","block")):(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion.eum.could_not_return_content+"</p>"),i.empty())})})}}jQuery(document).ready(function(e){new UpdraftCentral_EUM_Management});