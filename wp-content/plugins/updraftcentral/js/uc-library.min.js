function UpdraftCentral_Pagination(f){var t,n,a=this,r=jQuery,h=(f=r.extend({},f),new UpdraftCentral_Collection),m=new UpdraftCentral_Collection,i=function(e){if(void 0!==e){e=function(e){if(void 0===e.items_from){var t=parseInt(e.page),n=parseInt(e.pages),a=parseInt(e.results),r=0<parseInt(a%n)?1:0,i=parseInt(a/n)+r,o=t*i-i;e.items_from=o+1,e.items_to=t===n?a:t*i}return e}(e);var t=parseInt(e.page),n=parseInt(e.pages),a=parseInt(e.results),r=parseInt(e.items_from),i=parseInt(e.items_to),o=!1;f.hasOwnProperty("type")&&"local"===f.type&&(o=!0);var s="";return 1!==t&&(s+='<a href="#" data-page="1" data-preloaded="'+o+'" class="uc-pagination-first-button">'+udclion.first+"</a>",s+=' <span class="uc-pagination-separator">|</span> '),1<t&&(s+='<a href="#" data-page="'+(t-1)+'" data-preloaded="'+o+'" class="uc-pagination-previous-button">'+udclion.previous+"</a>"),1<t&&t<n&&(s+=' <span class="uc-pagination-separator">|</span> '),t<n&&(s+='<a href="#" data-page="'+(t+1)+'" data-preloaded="'+o+'" class="uc-pagination-next-button">'+udclion.next+"</a>"),n!==t&&(s+=' <span class="uc-pagination-separator">|</span> ',s+='<a href="#" data-page="'+n+'" data-preloaded="'+o+'" class="uc-pagination-last-button">'+udclion.last+"</a>"),s+='<div class="uc-pagination-results-info">'+sprintf(udclion.page_of,t,n)+', <span class="uc-pagination-item-bounds">'+sprintf(udclion.total_items,r,i,a)+"</span></div>"}console.log("Error: uc-library.js:UpdraftCentral_Pagination:build_interface - unable to construct pagination interface because the required info object is not defined. Possible cause, the module's handler in UpdraftPlus is outdated.")};this.preload_items=function(e){if(h.count()&&h.clear(),void 0!==e&&e)for(var t=0;t<e.length;t++){var n=e[t];if(n.hasOwnProperty("name")&&n.hasOwnProperty("website")){var a=n.name+"_"+n.website;h.add(a,n)}}},this.set_filtered_items=function(e){m=e},this.set_remote_data=function(e){t=e},this.get_data=function(e){return n=f.hasOwnProperty("type")&&"local"===f.type?function(e){var t={info:{},items:[]},n=m.count()?m:h,a=f.hasOwnProperty("items_per_page")?f.items_per_page:10;if(n.count()){e=void 0!==e?e:1;for(var r=n.count(),i=0<parseInt(r%a)?1:0,o=parseInt(r/a)+i,s=e*a-a,d=n.keys().splice(s,a),c=s+1,l=e===o?r:e*a,u=[],_=0;_<d.length;_++){var p=n.item(d[_]);u.push(p)}t={info:{page:e,pages:o,results:r,items_from:c,items_to:l},items:u}}return t}(e):t},this.render=function(e){if(void 0!==n&&n&&void 0===e||a.get_data(e),void 0!==n&&n){var t=i(n.info);f.hasOwnProperty("container")&&f.container&&(r(f.container).html(t),r(f.container).find("a.uc-pagination-first-button, a.uc-pagination-previous-button, a.uc-pagination-next-button, a.uc-pagination-last-button").off("click").on("click",function(){var e=r(this).data("page");f.hasOwnProperty("callback")&&f.callback&&f.callback.apply(null,[e])}))}}}function UpdraftCentral_Site_Filter(d){var c=jQuery,i=new UpdraftCentral_Collection,o=(d=c.extend({},d)).hasOwnProperty("default_site")&&d.default_site?d.default_site:null,l="uc_site_filter_",r=new UpdraftCentral_Collection,t=function(a){return c(".updraftcentral_site_row:not(.suspended)").each(function(){var n=c(this).data("site_id"),e=c(this).find("li.udc_tag_item .udc_tag_text");void 0!==e&&e&&e.length&&e.each(function(){var e=c(this).data("tag_name");if(r.exists(e)){var t=r.item(e);t.push(n),r.update(e,t)}else a.push({id:e,text:sprintf(udclion.add_all_sites_tagged,e)}),r.add(e,[n])})}),a};this.render=function(){var n,a,e=function(){var e=d.hasOwnProperty("extra_classes")&&d.extra_classes?" "+d.extra_classes:"",t=c("<div></div>",{class:l+"container"+e}),n=(c("<div></div>",{class:l+"label"}).html(d.label).appendTo(t),c("<div></div>",{class:l+"sites_container"}));c("<select></select>",{class:l+"sites",name:"sites[]",multiple:"multiple"}).appendTo(n);n.appendTo(t);var a=c("<div></div>",{class:l+"buttons"});if(d.hasOwnProperty("buttons")&&c.isArray(d.buttons))for(var r=0;r<d.buttons.length;r++){var i=d.buttons[r],o=i.hasOwnProperty("text")?i.text:udclion.submit,s=r+1;c("<button></button>",{id:i.hasOwnProperty("id")?i.id:l+"button"+s,name:i.hasOwnProperty("name")?i.name:l+"button"+s,class:i.hasOwnProperty("class")?"btn btn-primary "+i.class:"btn btn-primary"}).text(o).on("click",function(){i.hasOwnProperty("callback")&&"function"==typeof i.callback&&i.callback.apply(null,[])}).appendTo(a)}return a.appendTo(t),t}();d.hasOwnProperty("container")&&d.container&&(c(d.container).append(e),c(d.container).find("select."+l+"sites").select2({data:(n=[],a=[],n.push({id:0,text:udclion.add_all_sites}),n=t(n),c(".updraftcentral_site_row:not(.suspended)").each(function(){var e=c(this).data("site_id"),t={id:e,text:c(this).data("site_description")};n.push(t),a.push(e)}),r.add(0,a),n),placeholder:d.hasOwnProperty("placeholder")?d.placeholder:udclion.press_to_select_website}),c(d.container).find("select."+l+"sites").off("select2:select").on("select2:select",function(e){var t=e.params.data;if(r.exists(t.id)){c(this).val(null).trigger("change");var n=r.item(t.id);c(this).val(n).trigger("change")}}),c(d.container).find("select."+l+"sites").off("select2:open").on("select2:open",function(){c.fullscreen.isFullScreen()&&c(document.body).children("span.select2-container--open").appendTo("#updraftcentral_dashboard")}),c(d.container).find("select."+l+"sites").off("select2:opening select2:closing").on("select2:opening select2:closing",function(e){c(this).parent().find(".select2-search__field").prop("disabled",!0)}),c(d.container).find("input.select2-search__field").hide(),void 0!==o&&o&&c(d.container).find("select."+l+"sites").select2("trigger","select",{data:{id:o.data("site_id"),text:o.data("site_description")}}))},this.get_selected_sites=function(){var e=c("select."+l+"sites").val(),t=!1;if(i.count()&&i.clear(),void 0!==e&&e&&e.length)for(var n="string"==typeof e?e.split(","):e,a=0;a<n.length;a++){var r=c('.updraftcentral_site_row[data-site_id="'+n[a]+'"');r.length&&i.add(r.data("site_id"),r)}return i.count()||(i.add(o.data("site_id"),o),t=!0),{sites:i,selection_empty:t}}}function UpdraftCentral_Recorder(){var l,u=this,_=jQuery;function p(){u.current_site="",UpdraftCentral.$site_row=null}function f(e,t){if(void 0!==t)for(var n=0;n<t.length;n++){var a=t[n].dropdown,r=t[n].selected,i=_(a).prop("class"),o=_(a).prop("id"),s="";if(void 0!==i&&i.length?s="select."+i.replace(/\s/,"."):void 0!==o&&o.length&&(s="select#"+o),s.length)e.find(s).find('option[value="'+r+'"]').prop("selected","selected")}}function h(e,t){var n=e.no_sites[t].container,a=e.no_sites[t].post_load_callback,r=e.no_sites[t].mode,i=e.no_sites[t].options;_(".updraftcentral-search-area").hide(),_(n).parent().find(".ui-sortable-handle").hide(),_(n).html(e.no_sites[t].html),f(_(n),i),_("#updraftcentral_dashboard_existingsites").trigger("extra_contents_loaded_"+t,[null]),_("#updraftcentral_dashboard_existingsites").trigger("recorder_content_loaded",[t,_(n).html(),null]),r===t&&"function"==typeof a&&a.apply(null,[])}l=new UpdraftCentral_Collection,this.load=function(){_("#updraftcentral_dashboard_existingsites").on("extra_contents_loaded_updates",function(e,t){if(null===t){var n=_("#updraftcentral_dashboard_existingsites").find("#updates_container");void 0!==n&&n.length&&n.is(":visible")&&(p(),_("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.all_sites_selected),_("#updraft-central-content button.updraftcentral_action_choose_another_site").show())}}),_("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set_before",function(e,t){u.current_menu=t.new_mode,l.exists(t.new_mode)||l.add(t.new_mode,{sites:{},no_sites:{}}),l.exists(t.previous_mode)||l.add(t.previous_mode,{sites:{},no_sites:{}});var n=l.item(t.previous_mode);if(void 0!==u.current_site&&u.current_site.length){var a=t.extra_contents,r=u.current_site.data("site_id"),i=a.children().clone(!0,!0);void 0===n.sites[r]&&(n.sites[r]={}),n.sites[r].html=i,n.sites[r].force=t.force,n.sites[r].options=[],a.find("select").each(function(){n.sites[r].options.push({dropdown:_(this),selected:_(this).find("option").filter(":selected").val()})}),l.update(t.previous_mode,n),a.html("")}if(void 0!==n.no_sites[t.previous_mode]){var o=n.no_sites[t.previous_mode].container;i=(a=_(o)).children().clone(!0,!0);n.no_sites[t.previous_mode].html=i,n.no_sites[t.previous_mode].options=[],a.find("select").each(function(){n.no_sites[t.previous_mode].options.push({dropdown:_(this),selected:_(this).find("option").filter(":selected").val()})}),l.update(t.previous_mode,n),_(o).html("")}!0===t.force&&t.new_mode===t.previous_mode&&(u.reset=!0),l.exists("search_tag")||l.add("search_tag",""),void 0!==u.current_site&&u.current_site.length&&("sites"===t.previous_mode?(l.update("search_tag",_(".updraftcentral-search-area input#udc_search_tag").val()),_(".updraftcentral-search-area input#udc_search_tag").val("")):"sites"!==t.new_mode?_(".updraftcentral-search-area").hide():_(".updraftcentral-search-area input#udc_search_tag").val(l.item("search_tag")));var s=_(".updraft_site_actions.open");s.length?s.removeClass("open"):(s=_(".updraft_site_actions.show")).length&&s.removeClass("show"),void 0===u.current_site||u.current_site.length||_("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.no_site_selected)}),_("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set",function(e,t){if(t.new_mode!==t.previous_mode)if(void 0!==u.current_site&&u.current_site.length){var n=u.current_site.data("site_id"),a=_('.updraftcentral_site_row[data-site_id="'+n+'"]');if(void 0!==a&&a&&a.length){var r=!1;if("sites"!==t.new_mode){var i=a.closest("#updraftcentral_dashboard_existingsites");if(i.find('.updraftcentral_site_row[data-site_id="'+n+'"]').parent().show(),i.find('.updraftcentral_site_row[data-site_id!="'+n+'"]').each(function(){_(this).parent().hide()}),_(".updraftcentral-search-area").hide(),_("#updraft-central-content button.updraftcentral_action_choose_another_site").show(),void 0!==(c=l.item(t.new_mode))){var o=c.sites[n];if(void 0!==c.no_sites[t.new_mode])h(c,t.new_mode);else if(void 0!==o)if(o.force)r=!0;else if(o.storeable||void 0===o.action_item){var s=a.find(".updraftcentral_row_extracontents"),d=o.options;s.html(o.html),f(s,d),_("#updraftcentral_dashboard_existingsites").trigger("extra_contents_loaded_"+t.new_mode,[a]),_("#updraftcentral_dashboard_existingsites").trigger("recorder_content_loaded",[t.new_mode,o.html,o])}else _("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set_after",function(e,t){_("#updraftcentral_dashboard_existingsites").off("updraftcentral_dashboard_mode_set_after"),_(o.action_item).trigger("click")})}}else r=!0;r&&(_(".updraftcentral-search-area").show(),a.closest("#updraftcentral_dashboard_existingsites").find(".updraftcentral_site_row").parent().show())}}else{var c;void 0!==(c=l.item(t.new_mode))&&(void 0!==c.no_sites[t.new_mode]?h(c,t.new_mode):(_(".updraftcentral-search-area").show(),_("#updraftcentral_dashboard_existingsites").find(".ui-sortable-handle").show()))}else u.reset&&(l=new UpdraftCentral_Collection,!1,u.current_site="",UpdraftCentral.$site_row=null,_(".updraftcentral-search-area").show(),_("#updraftcentral_dashboard_existingsites").find(".ui-sortable-handle").show(),_("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.no_site_selected));UpdraftCentral.register_event_handler("click",".updraftcentral_mode_actions button.updraftcentral_action_show_all_updates",function(){var e=l.item(u.current_menu);void 0!==e&&e&&(void 0===e.no_sites[u.current_menu]&&(e.no_sites[u.current_menu]={container:"#updates_container.updraftcentral_row_extracontents",html:"",mode:"updates",post_load_callback:function(){"function"==typeof UpdraftCentral_Updates.reload_interface&&UpdraftCentral_Updates.reload_interface()}}),l.update(u.current_menu,e)),void 0!==u.current_site&&u.current_site.length&&_("#updraft-central-content button.updraftcentral_action_choose_another_site").show(),p(),_("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.all_sites_selected),_("#updraft-central-content button.updraftcentral_action_choose_another_site").show()}),UpdraftCentral.register_row_clicker(".btn-group > button",function(e){if(!_(this).closest(".updraft_site_actions").hasClass("more-option-container")&&(u.current_site=e,_("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.selected_site+": "+u.current_site.data("site_description")),"sites"!==u.current_menu)){action_item=_(this);var t=_(".updraftcentral-search-area input#udc_search_tag").val();t.length&&(l.update("search_tag",t),_(".updraftcentral-search-area input#udc_search_tag").val("")),_(".updraftcentral-search-area").hide();var n=!0;void 0!==action_item.data("storeable")&&!1===action_item.data("storeable")&&(n=!1);var a=u.current_site.data("site_id"),r=l.item(u.current_menu);if(void 0!==r&&r&&(void 0===r.sites[a]&&(r.sites[a]={}),r.sites[a].action_item=action_item.get(0),r.sites[a].storeable=n,r.no_sites={},l.update(u.current_menu,r)),"sites"!==u.current_menu)e.closest("#updraftcentral_dashboard_existingsites").find('.updraftcentral_site_row:not([data-site_id="'+a+'"])').parent().slideUp()}})}),_(".updraftcentral-search-area input#udc_search_tag").val(""),_("#updraft-central-navigation > div.updraftcentral_site_selected").length||_("#updraft-central-navigation").append('<div class="updraftcentral_site_selected">'+udclion.no_site_selected+"</div>")}}function UpdraftCentral_Keyboard_Shortcuts(){var k,l,C,x,U,u=this,O=jQuery,j="",P=!1;this.init=function(e){C=new UpdraftCentral_Collection,U=new UpdraftCentral_Collection,k={},l=[],u.originals=udclion.keyboard_shortcuts,x=null,t(e),void 0===e&&(O("#updraftcentral_dashboard_existingsites").on("recorder_content_loaded",function(e,t,n,a){x={menu:t,content:n,site:a}}),O(document).on("keydown",n),O("#updraftcentral_dashboard").on("updraftcentral_bootbox_dialog_opened",function(e,t,n){a(n)}),a(O("#updraftcentral_modal_dialog")),i())},this.register_shortcut=function(e,t,n){var a=t;"function"==typeof t&&(a=function(){UpdraftCentral.check_processing_state()||t.apply(null,[e.name,e.menu])});var r={name:e.name,key:e.key,description:e.description,action:a,menu:void 0!==e.menu?e.menu:"",site_required:void 0===e.site_required||e.site_required};_(r),C.exists(e.key)?void 0!==n&&n&&C.update(e.key,r):C.add(e.key,r)},this.save_shortcut=function(e,t){var a=O.Deferred();return UpdraftCentral.send_ajax("shortcuts",{name:e,key:t},null,"via_mothership_encrypting",null,function(e,t,n){"ok"===t&&e.hasOwnProperty("message")&&("success"===e.message?a.resolve():a.reject())}),a.promise()},this.clear_shortcuts=function(e){var a=O.Deferred();return UpdraftCentral.send_ajax("shortcuts",{clear:!0},null,"via_mothership_encrypting",e,function(e,t,n){"ok"===t&&e.hasOwnProperty("message")&&("success"===e.message?a.resolve(e):a.reject())}),a.promise()};var a=function(e){void 0!==e&&e&&e.on("click","a.keyboard_shortcuts",function(){var e=O(this).closest(".bootbox.modal.show");e.length||(e=O(this).closest("#updraftcentral_modal_dialog.show")),e.length&&e.removeClass("fade").scrollTop(0).hide(),r(null,e)})},_=function(e){void 0===e.site_required||e.site_required||(k[e.name]=!e.site_required)},t=function(e){UpdraftCentral.load_shortcuts().then(function(e){p(),f();var t=e;if("undefined"!=typeof udclion&&void 0!==udclion.keyboard_shortcuts)for(var n in udclion.keyboard_shortcuts){var a=(s=JSON.parse(JSON.stringify(udclion.keyboard_shortcuts[n]))).key,r=!1;s.menu.length&&!O("div.updraft-menu-item-"+s.menu).is(":visible")&&(r=!0),r||(-1!==window.navigator.userAgent.indexOf("Mac")&&-1!==window.navigator.appVersion.indexOf("Mac")&&(a=a.replace("CTRL","CONTROL").replace("ALT","OPTION")),s.name=n,C.add(a,s),void 0!==s.popup&&s.popup&&U.add(a,!0),_(s))}for(var i=C.get_items(),o=0;o<i.length;o++){var s;if(void 0!==t[(s=i[o]).name]){var d=s.key,c=t[s.name];c.length&&(s.key=c,C.add(s.key,s),C.remove(d))}}l=C.get_items().sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})}).always(function(){"function"==typeof e&&e.apply(null,[])})},n=function(e){if(!UpdraftCentral_Library.is_dialog_opened()){var t=e||window.event,n=e?e.which:t.keyCode,a=String.fromCharCode(n),r="",i="",o=O("div#updraft-central-content").find("input, textarea").is(":focus"),s=O("div#updraftcentral_modal_dialog").find("input, textarea").is(":focus"),d=O("div.bootbox.modal").find("input, textarea").is(":focus");if(!(o||s||d)){var c="CTRL",l="ALT",u="SHIFT";if(-1!==window.navigator.userAgent.indexOf("Mac")&&-1!==window.navigator.appVersion.indexOf("Mac")&&(c="CONTROL",l="OPTION"),17===n&&(i+=c),18===n&&(i+=i.length?"+"+l:l),16===n&&(i+=i.length?"+"+u:u),i.length?j+=j.length?"+"+i:i:a.length&&(j+=j.length?"+"+a:a),(1!==(r=j.split("+")).length||-1===O.inArray(r[0],[c,l,u]))&&j.length){var _=j.toLowerCase(),p=j.toUpperCase();if(-1!==_.indexOf("+")){var f=_.split("+");_=f[0].toUpperCase()+"+"+f[1]}if((C.exists(_)||C.exists(p))&&!P){var h=C.exists(_)?C.item(_):C.item(p);if(P=!0,"function"==typeof h.action)h.action.apply(null,[h.name,h.menu]);else if("string"==typeof h.action&&h.action.length){var m=UpdraftCentral.$site_row;if(void 0!==k[h.name]&&k[h.name])m=O("div#updraft-central-content");else if(void 0===m||!m){var v=O("div#updraftcentral_dashboard_existingsites > div.ui-sortable-handle").find(".updraftcentral_site_row:not(.suspended)").first();v.length&&(m=UpdraftCentral.$site_row=v)}if(void 0!==m&&m&&m.length){if(h.menu.length&&!h.action.length)return void O("div.updraft-menu-item-"+h.menu).trigger("click");var g=m.find("#"+h.action);!(void 0===g||!g.length)||!(void 0===(g=m.find("."+h.action))||!g.length)||(g=m.find(h.action));var b=m.find(".updraftcentral_row_extracontents");if(void 0!==g&&g&&g.length){h.menu&&h.menu.length||(h.menu="sites");var y=O("div.updraft-menu-item-links-active").prop("id").replace("updraft-menu-item-","");if(h.menu===y){if(x&&void 0!==x.menu&&h.menu===x.menu&&x.site&&x.site.action_item){var w=O(x.site.action_item);if(g.prop("class")===w.prop("class")&&!U.exists(h.key)&&b.find("div").html())return P=!1,void(x=null)}U.exists(h.key)&&b.html(""),g.trigger("click")}else O("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set_after",function(e,t){if(void 0!==g&&g&&g.length){if(O("#updraftcentral_dashboard_existingsites").off("updraftcentral_dashboard_mode_set_after"),x&&void 0!==x.menu&&h.menu===x.menu&&x.site&&x.site.action_item){var n=O(x.site.action_item);if(g.prop("class")===n.prop("class")&&!U.exists(h.key)&&b.find("div").html())return P=!1,void(x=null)}U.exists(h.key)&&b.html(""),g.trigger("click")}}),O("div.updraft-menu-item-"+h.menu).trigger("click")}}}else h.menu.length&&O("div.updraft-menu-item-"+h.menu).trigger("click");P=!1}j=""}}}},r=function(e,t){for(var n='<ul class="uc_shortcuts">',a=l,r=0;r<a.length;r++){var i=a[r],o=i.key;-1!==window.navigator.userAgent.indexOf("Mac")&&-1!==window.navigator.appVersion.indexOf("Mac")&&(o=o.replace("CTRL","CONTROL").replace("ALT","OPTION")),n+='<li data-name="'+i.name+'">'+i.description+" <span>("+udclion.shortcut_key+': <span class="uc_current_shortcut">'+o+'</span>)</span> <span class="uc_change_shortcut">'+udclion.keyboard_change_shortcut+'</span> <div class="uc_shortcut_elements"></div></li>'}if(n+="</ul>",void 0!==e&&e&&e.length)e.replaceWith(n);else{var s,d="shortcut_dialog_id",c=null;void 0!==t&&t&&(c=t.find("div.modal-dialog").offset(),s=!1),O("#updraftcentral_dashboard").on("updraftcentral_bootbox_dialog_opened",function(e,t,n){t===d&&c&&(n.find("div.modal-dialog").css({top:c.top}),n.scrollTop(0)),n.removeClass("fade")}),O("#updraftcentral_dashboard").on("updraftcentral_bootbox_dialog_closed",function(e,t,n){t===d&&(O("body").hasClass("modal-open")||O("body").addClass("modal-open"))}),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.keyboard_shortcuts_heading+' <a class="uc_clear_local_shortcuts">('+udclion.reset_shortcuts+")</a></h2><p>"+udclion.keyboard_shortcuts_message+'</p><div class="uc_shortcuts_spacer"><div class="uc_shortcuts_spinner"></div></div><p>'+n+"</p>",function(){void 0!==t&&t&&t.removeClass("fade").show().scrollTop()},!1,d,s)}},i=function(){UpdraftCentral.register_event_handler("click",".modal-dialog span.uc_change_shortcut",function(){for(var e=O(this).closest("li").find("div.uc_shortcut_elements"),t=["CTRL","ALT","SHIFT"],n="",a=0;a<t.length;a++)n+='<option value="'+t[a]+'">'+t[a]+"</option>";n='<select><option value="">'+udclion.keyboard_choose_modifiers+"</option>"+n+"</select> ";-1!==window.navigator.userAgent.indexOf("Mac")&&-1!==window.navigator.appVersion.indexOf("Mac")&&(n=""),e.html(n+'<input type="text" maxlength="1" value="" /> <button class="btn btn-primary uc_save_shortcut">'+udclion.keyboard_save_shortcut+'</button> <button class="btn btn-primary uc_cancel_shortcut">'+udclion.keyboard_cancel_shortcut+'</button> <span class="uc_new_shortcut"></span>'),O(this).hide()}),UpdraftCentral.register_event_handler("click",".modal-dialog button.uc_save_shortcut",function(){var e=O(this).closest("li").find("div.uc_shortcut_elements"),t=e.find("select").val(),n=e.find('input[type="text"]').val(),a=e.parent().data("name");if(n&&n.length&&n.match(/^[a-zA-Z]$/g)){var r="+";void 0!==t&&t.length||(t=r="");var i=t+r+n;if(i.length){var o=!1;if(e.closest("ul.uc_shortcuts").find('li[name!="'+a+'"] span.uc_current_shortcut').each(function(){var e=O(this).html();if(i.toUpperCase()===e.toUpperCase())return o=!0,UpdraftCentral_Library.dialog.alert("<h2>"+udclion.keyboard_shortcut_exist_heading+"</h2><p>"+udclion.keyboard_shortcut_exist+"</p>"),!1}),!o){var s=e.parent().find("span.uc_current_shortcut"),d=s.html();if(C.exists(d)){var c=C.item(d);c.key=i,u.save_shortcut(a,c.key).then(function(e){C.add(c.key,c),C.remove(d),s.html(c.key),U.exists(d)&&(U.remove(d),U.add(i,!0))}).always(function(){O(".modal-dialog span.uc_change_shortcut").show(),e.html("")})}}}}else UpdraftCentral_Library.dialog.alert("<h2>"+udclion.keyboard_shortcut_required_heading+"</h2><p>"+udclion.keyboard_shortcut_required+"</p>")}),UpdraftCentral.register_event_handler("click",".modal-dialog button.uc_cancel_shortcut",function(){var e=O(this).closest("li").find("div.uc_shortcut_elements");O(".modal-dialog span.uc_change_shortcut").show(),e.html("")}),UpdraftCentral.register_event_handler("change",".modal-dialog div.uc_shortcut_elements select",function(e){O(".modal-dialog").trigger("keyboard_shortcut_changed",[this])}),UpdraftCentral.register_event_handler("keyup",".modal-dialog div.uc_shortcut_elements input",function(e){var t=O(this).closest("li").find("div.uc_shortcut_elements");t.find('input[type="text"]').val().match(/^[a-zA-Z]$/g)?t.find("button.uc_save_shortcut").prop("disabled",!1):t.find("button.uc_save_shortcut").prop("disabled",!0),O(".modal-dialog").trigger("keyboard_shortcut_changed",[this])}),UpdraftCentral.register_event_handler("keyboard_shortcut_changed",".modal-dialog",function(e,t){var n=O(t).closest("li").find("div.uc_shortcut_elements"),a=n.find("span.uc_new_shortcut"),r=n.find("select").val(),i=n.find('input[type="text"]').val(),o="+";void 0!==r&&r.length||(r=o=""),i&&i.length||(o="");var s=r+o+i;i&&i.length?i.match(/^[a-zA-Z]$/g)?a.html('<div class="uc_tip_wrapper">'+udclion.keyboard_new_shortcut+": "+s+"</div>"):a.html('<div class="uc_tip_wrapper">'+udclion.keyboard_invalid_key+"</div>"):(a.html(""),n.find("button.uc_save_shortcut").prop("disabled",!1))}),UpdraftCentral.register_event_handler("click","a.uc_clear_local_shortcuts",function(){var t=O(".bootbox.modal ul.uc_shortcuts"),e=O(".bootbox.modal div.uc_shortcuts_spinner");u.clear_shortcuts(e).then(function(e){u.init(function(){r(t)})})})},p=function(){for(var e=[{name:"show_comments",key:"C",description:udclion.show_comments,menu:"comments",action:"updraftcentral_site_comments_manage"},{name:"show_users",key:"U",description:udclion.show_users,menu:"users",action:"updraftcentral_site_users_manage"},{name:"show_analytics",key:"A",description:udclion.show_analytics,menu:"analytics",action:"updraftcentral_site_analytics_show"}],t=0;t<e.length;t++){var n=e[t];if(void 0===udclion.keyboard_shortcuts[n.name]){var a={name:n.name,key:n.key,description:n.description,menu:n.menu};u.register_shortcut(a,n.action,!0)}}},f=function(){var e={name:"z_keyboard_shortcuts_help",key:"K",description:udclion.keyboard_shortcuts_help,menu:"",site_required:!1};u.register_shortcut(e,function(e){r()},!0);var t={name:"site_update",key:"D",description:udclion.site_update,menu:"updates"};u.register_shortcut(t,function(e,t){var n=UpdraftCentral.$site_row;t.length&&(O("div.updraft-menu-item-"+t+".updraft-menu-item-links-active").length||O("div.updraft-menu-item-"+t).trigger("click"));if(void 0===n||!n)n=O("div#updraftcentral_dashboard_existingsites > div.ui-sortable-handle:first-child").find(".updraftcentral_site_row");$mass_updates_container=n.closest("#updraftcentral_dashboard_existingsites").find("#updates_container"),"undefined"!=typeof $mass_updates_container&&$mass_updates_container.length&&$mass_updates_container.remove();var a=n.find("button.updraftcentral_action_show_updates");void 0!==a&&a.length&&(void 0!==t&&"updates"===t&&n.find(".updraftcentral_row_extracontents").html(""),a.trigger("click")),n.show(),n.closest(".ui-sortable-handle").show()},!0)}}function UpdraftCentral_Task_Progress(){var a,r,i,n,o,s=this,d=d||"";this.total_items,this.label;var t=function(){if(0!=d.length)if(void 0!==jQuery.ui&&"function"==typeof jQuery.ui.progressbar)if(0===d.find("#uc_task_progress").length&&d.append('<div id="uc_task_progress"><div id="uc_task_progress_label">'+udclion.current_progress+': 0%</div><div id="uc_task_progress_bar"><div id="uc_task_progress_status"></div></div></div>'),(a=d.find("#uc_task_progress > div#uc_task_progress_bar")).is(":ui-progressbar")){var e=parseInt(s.total_items),t=100%e,n=r.count()*parseInt(100/e)+t;n<100&&(o=n,a.progressbar("option","value",n))}else a.progressbar({max:100,value:0,change:function(){d.find("#uc_task_progress_label").text(udclion.current_progress+": "+a.progressbar("option","value")+"%")},complete:function(){clearInterval(i)}});else console.log("UpdraftCentral_Task_Progress: jQuery progressbar or one of its dependency is not installed - exiting");else console.log("UpdraftCentral_Task_Progress: Progress bar container not defined - exiting")};void 0!==d?(s.total_items=0,r=new UpdraftCentral_Collection,o=n=0):console.log("UpdraftCentral_Task_Progress: A container element is required. This is where the progress bar is to be appended - exiting");this.set_custom_status=function(e){var t=d.find("#uc_task_progress_status");0!=t.length&&void 0!==e&&e&&t.text(e)},this.set_complete=function(e){var t=d.find("#uc_task_progress_status");0!=t.length&&(o=100,a.progressbar("option","value",o),void 0!==e?t.text(e):t.text(udclion.process_completed))},this.update=function(){r.count()&&t()},this.set_current_label=function(e,t){var n=d.find("#uc_task_progress_status");0!=n.length&&r.add(e,e)&&(s.label=e,void 0!==t&&t?n.text(e):n.text(udclion.processing+' "'+s.label+'" ...'))},this.set_container=function(e){void 0!==i&&clearInterval(i),d=e,t()},this.start=function(){!function(){if(0!=d.find("#uc_task_progress").length){var e=parseInt(s.total_items),t=100%e;n=r.count()*parseInt(100/e)+t,i=setInterval(function(){o<n&&o<99?a.progressbar("option","value",++o):clearInterval(i)},1e3)}}()},this.end=function(){s.reset()},this.abort=function(e){var t=d.find("#uc_task_progress_status");0!=t.length&&(clearInterval(i),void 0!==e?t.text(e):t.text(udclion.process_aborted))},this.reset=function(){var e=d.find("#uc_task_progress");0!=e.length&&(clearInterval(i),total_items=0,r.clear(),o=n=0,e.remove())},this.clear=function(){clearInterval(i),total_items=0,r.clear(),o=n=0},this.hide=function(){var e=d.find("#uc_task_progress");0!=e.length&&e.hide()},this.show=function(){var e=d.find("#uc_task_progress");0!=e.length&&e.show()}}function UpdraftCentral_Collection(){var n=this,a=0,r={};this.add=function(e,t){return!n.exists(e)&&(r[e]=t,a++,!0)},this.update=function(e,t){return!!n.exists(e)&&(r[e]=t,!0)},this.remove=function(e){return!!n.exists(e)&&(delete r[e],a--,!0)},this.item=function(e){return r[e]},this.keys=function(){var e=[];for(var t in r)e.push(t);return e},this.exists=function(e){return void 0!==r[e]},this.clear=function(){a=0,r={}},this.count=function(){return a},this.get_items=function(){var e=[];for(var t in r)e.push(r[t]);return e}}function UpdraftCentral_Tasks_Runner(i){var o,s=this;i=i||{};this.progress;o=new UpdraftCentral_Collection,s.progress=new UpdraftCentral_Task_Progress;var d=function(e,n){e.func.apply(null,e.args).then(function(e){n(null,e)}).fail(function(e){var t=e;void 0===t&&(t=!0),n(t)})};this.tasks_count=function(){return o.count()},this.remove_task=function(e){return o.remove(e)},this.add_task=function(e,t){if("function"==typeof e){var n=(new Date).getTime(),a=Math.ceil(1e3*Math.random()),r=UpdraftCentral_Library.md5("_key_"+n+a),i={func:e,args:t};if(i.args.push(s),o.add(r,i))return r}return!1},this.clear_tasks=function(){s.progress.clear(),o.clear()},this.abort=function(){queue.abort(),s.clear_tasks()},this.process_tasks=function(){var n=jQuery.Deferred();if(0<o.count()){var e;s.progress.total_items=o.count(),e=void 0!==i.concurrency?d3.queue(i.concurrency):d3.queue();for(var t=o.keys(),a=0;a<t.length;a++){var r=o.item(t[a]);e.defer(d,r)}e.awaitAll(function(e,t){e?n.reject(e):n.resolve(t)})}else n.reject(udclion.tasks_queue_empty);return n.promise()}}function UpdraftCentral_Credentials(){var u,_,p;u=new UpdraftCentral_Collection,_=jQuery("#updraftcentral_modal_dialog"),p="hidden.bs.modal",this.get_credentials=function(a){var r=jQuery.Deferred(),e=a.site_row,t=a.id;if(u.exists(t)){var i,o=u.item(t),n=o.request_filesystem_credentials||{},s=!1;for(var d in n)n[d]&&(s=!0,i=d);if(void 0===o.site_credentials)if(s){var c=UpdraftCentral.storage_get("filesystem_credentials_"+a.site_hash),l=UpdraftCentral.get_site_heading(e);UpdraftCentral.open_modal(udclion.updates.connection_information,UpdraftCentral.template_replace("updates-request-credentials",{credentials_form:o.filesystem_form,site_heading:l}),function(){var t=jQuery("#updraftcentral_modal #filesystem-credentials-save-in-browser").is(":checked"),n=jQuery("#updraftcentral_modal .request-filesystem-credentials-dialog-content input").serialize();f(e,i,n).then(function(e){o.site_credentials=n,a.site_credentials=n,t&&(a.save_credentials_in_browser=!0),r.resolve(a)}).fail(function(e,t,n){0<UpdraftCentral.get_debug_level()&&(console.log("Failed result follows for 'validate_remote_credentials' method called within UpdraftCentral_Credentials.get_credentials:"),console.log(e)),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.failed_credentials_heading+"</h2><p>"+udclion.failed_credentials+"</p>"),r.reject(e,t,n)}).always(function(){_.off(p),UpdraftCentral.close_modal()})},udclion.updates.update,function(){jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[value=""]:first').focus(),c&&(saved_credentials=UpdraftCentral_Library.unserialize(c),saved_credentials&&(jQuery.each(saved_credentials,function(e,t){var n=jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+e+'"]').attr("type");"text"==n||"number"==n||"password"==n?jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+e+'"]').val(t):"checkbox"==n?t?jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+e+'"]').prop("checked",!0):jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+e+'"]').prop("false",!0):"radio"==n?jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+e+'"][value="'+t+'"]').prop("checked",!0):n&&console.log("UpdraftCentral: unrecognised field type in credential form: type="+n+", field index="+e)}),jQuery("#updraftcentral_modal #filesystem-credentials-save-in-browser").prop("checked",!0))),jQuery('#updraftcentral_modal div#request-filesystem-credentials-form fieldset > legend:contains("Connection Type"):gt(0)').hide(),_.on(p,function(){r.reject()})},!0,"",function(){r.reject()})}else r.reject(a);else a.site_credentials=o.site_credentials,r.resolve(a)}else r.reject(a);return r.promise()},this.load_credentials=function(e){var a=jQuery.Deferred(),t=e.id,n=e.site_row;return void 0!==t?u.exists(t)?a.resolve(u.item(t)):o(n).then(function(e){u.add(t,e),a.resolve(e)}).fail(function(e,t,n){a.reject(e,t,n)}):a.reject(),a.promise()},this.load_all_credentials=function(e){var t=jQuery.Deferred(),n=[];if(void 0!==e&&0<e.length){for(var a=0;a<e.length;a++){var r=e[a],i=r.site_row;n.push(o(i).then(function(e){var t=r.id;void 0!==t&&u.add(t,e)}))}jQuery.when.apply(jQuery,n).then(function(){t.resolve()})}return t.promise()};var o=function(e){var a=jQuery.Deferred();return UpdraftCentral.send_site_rpc("core.get_credentials",null,e,function(e,t,n){if("ok"!==t||!e)return a.reject(e,t,n),!0;a.resolve(e.data)}),a.promise()},f=function(e,t,n){var a=jQuery.Deferred(),r={entity:t,filesystem_credentials:n};return UpdraftCentral.send_site_rpc("core.validate_credentials",r,e,function(e,t,n){"ok"!==t||e.data.error?a.reject(e,t,n):a.resolve(e.data)}),a.promise()}}function UpdraftCentral_Site(e){var n=this;this.id,this.site_description,this.site_url,this.site_hash,this.site_row=e,this.save_credentials_in_browser,this.site_credentials,this.credentials_required,this.automatic_backups,this.autobackup_options,this.autobackup_requested,this.autobackup_complete,this.updates,this.update_requests,this.update_processing,this.additional_options,this.mass_update,this.update_queue;n.id=n.site_row.data("site_id"),n.site_description=n.site_row.data("site_description"),n.site_url=n.site_row.data("site_url"),n.site_hash=UpdraftCentral_Library.md5(n.id+"_"+n.site_row.data("site_url")),n.save_credentials_in_browser=!1,n.site_credentials=!1,n.credentials_required=!1,n.automatic_backups=!1,n.autobackup_options={},n.autobackup_requested=!1,n.autobackup_complete=!1,n.backup_completed=!1,n.updates={plugin:new UpdraftCentral_Collection,theme:new UpdraftCentral_Collection,core:new UpdraftCentral_Collection,translation:new UpdraftCentral_Collection},n.update_requests=new UpdraftCentral_Queue,n.update_processing=!1,n.mass_update=!1,n.update_queue=new UpdraftCentral_Collection,this.get_update_info=function(e,t){return!!n.updates[e].exists(t)&&n.updates[e].item(t)}}function UpdraftCentral_Queueable_Modal(e){var t,n,a=!1,r=e||jQuery("#updraftcentral_modal_dialog"),i=function(){void 0!==r?r.on(t,function(){if(n.is_empty())a=!0,r.off(t),n.unlock();else{var e=n.dequeue();void 0!==e&&o(e)}}):console.log("UpdraftCentral_Queueable_Modal: Modal element does not exist.")};n=new UpdraftCentral_Queue,t="hidden.bs.modal",i();var o=function(e){UpdraftCentral.open_modal(e.title,e.body,e.action_button_callback,e.action_button_text,e.pre_open_callback,e.sanitize_body,e.extra_classes)};this.load=function(){if(!n.is_empty()&&n.get_lock()){var e=n.dequeue();void 0!==e&&o(e)}},this.open=function(e,t){void 0!==t&&t?n.is_locked()||(n.enqueue(e),!n.is_empty()&&a&&(i(),a=!1)):o(e)},this.close=function(){UpdraftCentral.close_modal()},this.get_queue_item_count=function(){return n.get_length()}}function UpdraftCentral_Library(){this.dialog={};var c=jQuery,s=new UpdraftCentral_Collection;this.sort=function(e,r,i){if(c.isArray(e)&&"string"==typeof r)return void 0===i&&(i="asc"),e.sort(function(e,t){if("object"==typeof e&&e.hasOwnProperty(r)&&"object"==typeof t&&t.hasOwnProperty(r)){var n=e[r].toString().toLowerCase(),a=t[r].toString().toLowerCase();return"desc"===i?a<n?-1:n<a?1:0:n<a?-1:a<n?1:0}return 0}),e},this.filter=function(e,o,s,d){if(c.isArray(e)&&c.isArray(o)&&"string"==typeof s)return c.grep(e,function(e){for(var t=[],n=0;n<o.length;n++){var a=o[n];"object"==typeof e&&e.hasOwnProperty(a)&&t.push(e[a].toString())}if(t.length){if(void 0===d||!d){if(1===t.length&&-1==t[0].indexOf(",")&&s.length)return t[0].toLowerCase()===s.toLowerCase();var r=!1;for(n=0;n<t.length;n++){var i=t[n];if(i.toLowerCase()===s.toLowerCase()){r=!0;break}if(-1!==i.toLowerCase().indexOf(s.toLowerCase())){r=!0;break}}return r}if(t.length===o.length)return!0}return!1})},this.enable_actions=function(e){c(e=void 0!==e&&e?e:".updraftcentral_row_extracontents").find("input, button, select, a").prop("disabled",!1).removeClass("disabled_cursor")},this.disable_actions=function(e,t){e=void 0!==e&&e?e:".updraftcentral_row_extracontents";var n="";void 0!==t&&c.isArray(t)&&t.length&&(n=t.join(",")),c(e).find("input, button, select, a").not(n).prop("disabled",!0).addClass("disabled_cursor")},this.is_dialog_opened=function(){return!(!c("div.bootbox.modal").is(":visible")&&!c("div#updraftcentral_modal_dialog").is(":visible"))};var r=function(e){var a=jQuery.Deferred();return UpdraftCentral.send_ajax("manage_site_meta",e,null,"via_mothership_encrypting",null,function(e,t,n){"ok"==t&&void 0!==e.data?a.resolve(e.data):a.reject(e.message)}),a.promise()};this.add_site_meta=function(e,t,n,a){return void 0===a&&(a=!1),r({action:"add",site_id:e,meta_key:t,meta_value:n,unique:a})},this.delete_site_meta=function(e,t,n){return void 0===n&&(n=""),r({action:"delete",site_id:e,meta_key:t,meta_value:n})},this.get_site_meta=function(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=!1),r({action:"get",site_id:e,key:t,single:n})},this.update_site_meta=function(e,t,n,a){return void 0===a&&(a=""),r({action:"update",site_id:e,meta_key:t,meta_value:n,prev_value:a})};var d=function(e,t){c.fullscreen.isFullScreen()&&c(".bootbox.modal").appendTo("#updraftcentral_dashboard"),c(".bootbox.modal").on("click","a",function(e){var t=c(this).attr("href");"function"==typeof redirect_updraft_website_links&&redirect_updraft_website_links(t,e)}),c(".bootbox.modal .updraftcentral_site_editdescription").click(function(e){e.preventDefault(),c(this).closest(".modal").modal("hide"),open_site_configuration(UpdraftCentral.$site_row)}),c(".bootbox.modal .updraftcentral_test_other_connection_methods").click(function(e){e.preventDefault(),c(this).closest(".modal").modal("hide"),open_connection_test(UpdraftCentral.$site_row)}),c(".bootbox.modal").data("id",e),c(".bootbox.modal.bootbox-alert, .bootbox.modal.bootbox-confirm, .bootbox.modal.bootbox-prompt").find('button[data-dismiss="modal"], button[data-bb-handler="ok"], button[data-bb-handler="cancel"], button[data-bb-handler="confirm"]').off("click").on("click",function(){s.exists(e)&&s.remove(e),c("#updraftcentral_dashboard").trigger("updraftcentral_dialog_closed")}),c(".bootbox.modal").on("hidden.bs.modal",function(){s.exists(e)&&s.remove(e),c("#updraftcentral_dashboard").trigger("updraftcentral_dialog_closed")}),void 0!==t&&t&&(t.on("shown.bs.modal",function(){c("#updraftcentral_dashboard").trigger("updraftcentral_bootbox_dialog_opened",[e,t])}),t.on("hidden.bs.modal",function(){c("#updraftcentral_dashboard").trigger("updraftcentral_bootbox_dialog_closed",[e,t])})),c("#updraftcentral_dashboard").trigger("updraftcentral_dialog_opened")};this.ucfirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},this.open_connection_test=function(t){var n=UpdraftCentral.get_contact_url(t),i=t.data("site_id"),o=t.data("connection_method");if("via_mothership_encrypting"!=o){var r="direct_jquery_auth"==o||"direct_default_auth"==o||"direct_default_auth"==o?"direct":o;UpdraftCentral.open_modal(udclion.test_connection_methods,UpdraftCentral.template_replace("sites-connection-test",{site_url:n}),!0,!1,function(){var e=!0;"https:"==document.location.protocol&&"http:"==n.substring(0,5).toLowerCase()&&(e=!1),e?(c("#updraftcentral_modal .connection-test-direct .connection-test-result").html(""),UpdraftCentral.send_ajax("ping",null,t,"direct_default_auth","#updraftcentral_modal .connection-test-direct .connection-test-result",function(e,t,n){if(0<UpdraftCentral.get_debug_level()&&(console.log("Result follows for 'direct_default_auth' method:"),console.log(e)),"ok"==t){var a='<span class="connection-test-succeeded">'+udclion.succeeded+"</span> ";a+="direct"==r?udclion.current_method+" "+udclion.best_method+" "+udclion.recommend_keep:udclion.best_method+" "+udclion.recommend_use+' <a href="#" class="connection-test-switch" data-site_id="'+i+'" data-connection_method="direct_default_auth">'+udclion.switch_to+"...</a>",c("#updraftcentral_modal .connection-test-direct .connection-test-result").html(a)}else c("#updraftcentral_modal .connection-test-direct .connection-test-result").html('<span class="connection-test-failed">'+udclion.failed+" ("+n+")</span>")},30,!1)):c("#updraftcentral_modal .connection-test-direct .connection-test-result").html(udclion.not_possible_browser_restrictions),c("#updraftcentral_modal .connection-test-via_mothership .connection-test-result").html(""),UpdraftCentral.send_ajax("ping",null,t,"via_mothership","#updraftcentral_modal .connection-test-via_mothership .connection-test-result",function(e,t,n){if(c("#updraftcentral_modal .connection-test-via_mothership .connection-test-result").html(t),0<UpdraftCentral.get_debug_level()&&(console.log("Result follows for 'via_mothership' method:"),console.log(e)),"ok"==t){var a='<span class="connection-test-succeeded">'+udclion.succeeded+"</span> ";a+="via_mothership"!=o?'<a href="#" class="connection-test-switch" data-site_id="'+i+'" data-connection_method="via_mothership">'+udclion.switch_to+"...</a>":udclion.current_method,c("#updraftcentral_modal .connection-test-via_mothership .connection-test-result").html(a)}else{var r=n;"unexpected_http_code"==n&&(null!=e&&e.hasOwnProperty("data")&&null!=e.data&&e.data.hasOwnProperty("response")&&e.data.response.hasOwnProperty("code")&&(r+=" - "+e.data.response.code),null!=e&&e.hasOwnProperty("data")&&null!=e.data&&e.data.hasOwnProperty("response")&&e.data.response.hasOwnProperty("message")&&(r+=" - "+e.data.response.message)),c("#updraftcentral_modal .connection-test-via_mothership .connection-test-result").html('<span class="connection-test-failed">'+udclion.failed+" ("+r+")</span>")}},30,!1),c("#updraftcentral_modal .connection-test-via_mothership_encrypting .connection-test-result").html(""),UpdraftCentral.send_ajax("ping",null,t,"via_mothership_encrypting","#updraftcentral_modal .connection-test-via_mothership_encrypting .connection-test-result",function(e,t,n){if(0<UpdraftCentral.get_debug_level()&&(console.log("Result follows for 'via_mothership_encrypting' method:"),console.log(e)),"ok"==t){var a='<span class="connection-test-succeeded">'+udclion.succeeded+"</span> ";a+="via_mothership_encrypting"!=o?'<a href="#" class="connection-test-switch" data-site_id="'+i+'" data-connection_method="via_mothership_encrypting">'+udclion.switch_to+"...</a>":udclion.current_method,c("#updraftcentral_modal .connection-test-via_mothership_encrypting .connection-test-result").html(a)}else{var r=n;"unexpected_http_code"==n&&(null!=e&&e.hasOwnProperty("data")&&null!=e.data&&e.data.hasOwnProperty("response")&&e.data.response.hasOwnProperty("code")&&(r+=" - "+e.data.response.code),null!=e&&e.hasOwnProperty("data")&&null!=e.data&&e.data.hasOwnProperty("response")&&e.data.response.hasOwnProperty("message")&&(r+=" - "+e.data.response.message)),c("#updraftcentral_modal .connection-test-via_mothership_encrypting .connection-test-result").html('<span class="connection-test-failed">'+udclion.failed+" ("+r+")</span>")}},30,!1)},!0,"modal-lg")}else UpdraftCentral_Library.dialog.alert("<h2>"+udclion.test_connection_methods+"</h2><p>"+udclion.test_not_possible_in_current_mode+"</p>")},this.dialog.alert=function(e,t,n,a,r){(n="undefined"==n||n)&&(e=this.sanitize_html(e));var i=void 0!==a?a:UpdraftCentral_Library.md5("_alert_"+e);if(!s.exists(i)){s.add(i,!0);var o=bootbox.alert({message:e,callback:t,backdrop:r});d(i,o)}},this.dialog.confirm=function(e,t,n){var a=void 0!==n?n:UpdraftCentral_Library.md5("_confirm_"+e);if(!s.exists(a)){s.add(a,!0);var r=bootbox.confirm(e,t);d(a,r)}},this.dialog.prompt=function(e,t,n,a){var r=void 0!==a?a:UpdraftCentral_Library.md5("_prompt_"+e);if(!s.exists(r)){s.add(r,!0);var i=bootbox.prompt({title:e,value:t,callback:n});d(r,i)}},this.base64_encode=function(e){return forge.util.encode64(e)},this.md5=function(e){var t=forge.md.md5.create();return t.update(e),t.digest().toHex()},this.sanitize_html=function(e){return html_sanitize.sanitize(e,function(e){if(/^https?:\/\//.test(e))return e},function(e){return e})},this.escape_attrib=function(e){return html_sanitize.escapeAttrib(e)},this.quote_attribute=function(e,t){return t=t?"&#13;":"\n",(""+e).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,t).replace(/[\r\n]/g,t)},this.open_browser_at=function(e,t,n){t=void 0!==t?t:null,n=void 0===n?e:n,UpdraftCentral.send_site_rpc("core.get_login_url",t,e,function(e,t,n){if("ok"==t&&!1!==e&&e.hasOwnProperty("data")){var a=e.data.login_url,r=window.open(a,"_blank");UpdraftCentral_Library.focus_window_or_error(r)}},n)},this.focus_window_or_error=function(e){null!=e?e.focus():this.dialog.alert("<h2>"+udclion.open_new_window+"</h2>"+udclion.window_may_be_blocked)},this.toggle_fullscreen=function(){c.fullscreen.isFullScreen()?(c("footer").show(),c.fullscreen.exit(),c("#updraftcentral_modal_dialog").appendTo(document.body)):(c("footer").hide(),c("#updraftcentral_dashboard").fullscreen({overflow:"scroll",toggleClass:"updraft-fullscreen"}),c("#updraftcentral_modal_dialog").appendTo("#updraftcentral_dashboard"))},this.unserialize=function(e){for(var t,n,a=decodeURI(e).split("&"),r={},i=0,o=a.length;i<o;i++)void 0===r[n=(t=a[i].split("="))[0]]?r[n]=unescape(t[1]):("string"==typeof r[n]&&(r[n]=[r[n]]),r[n].push(unescape(t[1])));return r},this.get_serialized_options=function(e){var n=c(e).serialize();return c.each(c(e+" input[type=checkbox]").filter(function(e){return 0==c(this).prop("checked")}),function(e,t){n+="&"+c(t).attr("name")+"=0"}),n},this.download_inner_html=function(e,t,n){n=n||"text/plain";var a=document.getElementById(t).innerHTML,r=document.body.appendChild(document.createElement("a"));r.setAttribute("download",e),r.setAttribute("style","display:none;"),r.setAttribute("href","data:"+n+";charset=utf-8,"+encodeURIComponent(a)),r.click()}}jQuery(document).ready(function(e){UpdraftCentral_Library=new UpdraftCentral_Library});