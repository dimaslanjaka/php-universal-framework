var GoogleScraper = require("google-scraper").GoogleScraper;
var request = require("request");
var hostPortRegexp = /(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})\:(\d{1,5})/g;
function readProxiesFromString(string, callback) {
    var matches;
    while ((matches = hostPortRegexp.exec(string))) {
        var host = matches[1];
        var port = matches[2];
        callback(host, port);
    }
}
function readProxiesFromUrl(url, callback) {
    request(url, function (err, res) {
        if (!err && res.body) {
            readProxiesFromString(res.body, callback);
        }
    });
}
function readProxiesFromUrls(urls, callback) {
    urls.forEach(function (url) {
        readProxiesFromUrl(url, callback);
    });
}
function findProxiesFromSearch(query, language, nbResults, callback) {
    var options = {
        keyword: query,
        language: language,
        results: nbResults,
    };
    var scraper = new GoogleScraper(options);
    scraper.getGoogleLinks(function (urls) {
        readProxiesFromUrls(urls, callback);
    });
}
module.exports = {
    findProxiesFromSearch: findProxiesFromSearch,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJveHktc2NyYXBwZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJwcm94eS1zY3JhcHBlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxhQUFhLENBQUM7QUFDOUQsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBRW5DLElBQUksY0FBYyxHQUFHLGtEQUFrRCxDQUFDO0FBRXhFLFNBQVMscUJBQXFCLENBQzVCLE1BQWMsRUFDZCxRQUF3QztJQUV4QyxJQUFJLE9BQWMsQ0FBQztJQUNuQixPQUFPLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRTtRQUM5QyxJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEIsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RCLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDdEI7QUFDSCxDQUFDO0FBRUQsU0FBUyxrQkFBa0IsQ0FDekIsR0FBUSxFQUNSLFFBQXdDO0lBRXhDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsVUFBVSxHQUFRLEVBQUUsR0FBcUI7UUFDcEQsSUFBSSxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsSUFBSSxFQUFFO1lBQ3BCLHFCQUFxQixDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7U0FDM0M7SUFDSCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTLG1CQUFtQixDQUFDLElBQVcsRUFBRSxRQUFhO0lBQ3JELElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFRO1FBQzdCLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNwQyxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTLHFCQUFxQixDQUM1QixLQUFVLEVBQ1YsUUFBYSxFQUNiLFNBQWMsRUFDZCxRQUFhO0lBRWIsSUFBSSxPQUFPLEdBQUc7UUFDWixPQUFPLEVBQUUsS0FBSztRQUNkLFFBQVEsRUFBRSxRQUFRO1FBQ2xCLE9BQU8sRUFBRSxTQUFTO0tBQ25CLENBQUM7SUFDRixJQUFJLE9BQU8sR0FBRyxJQUFJLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN6QyxPQUFPLENBQUMsY0FBYyxDQUFDLFVBQVUsSUFBUztRQUN4QyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDdEMsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRztJQUNmLHFCQUFxQixFQUFFLHFCQUFxQjtDQUM3QyxDQUFDIn0=