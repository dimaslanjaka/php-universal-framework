$((function(){"use strict";QUnit.module("tooltip plugin"),QUnit.test("should be defined on jquery object",(function(t){t.expect(1),t.ok($(document.body).tooltip,"tooltip method is defined")})),QUnit.module("tooltip",{beforeEach:function(){$.fn.bootstrapTooltip=$.fn.tooltip.noConflict()},afterEach:function(){$.fn.tooltip=$.fn.bootstrapTooltip,delete $.fn.bootstrapTooltip,$(".tooltip").remove(),$("#qunit-fixture").html("")}}),QUnit.test("should provide no conflict",(function(t){t.expect(1),t.strictEqual(typeof $.fn.tooltip,"undefined","tooltip was set back to undefined (org value)")})),QUnit.test("should throw explicit error on undefined method",(function(t){t.expect(1);var o=$("<div/>");o.bootstrapTooltip();try{o.bootstrapTooltip("noMethod")}catch(e){t.strictEqual(e.message,'No method named "noMethod"')}})),QUnit.test("should return jquery collection containing the element",(function(t){t.expect(2);var o=$("<div/>"),e=o.bootstrapTooltip();t.ok(e instanceof $,"returns jquery collection"),t.strictEqual(e[0],o[0],"collection contains element")})),QUnit.test("should expose default settings",(function(t){t.expect(1),t.ok($.fn.bootstrapTooltip.Constructor.Default,"defaults is defined")})),QUnit.test("should empty title attribute",(function(t){t.expect(1);var o=$('<a href="#" rel="tooltip" title="Another tooltip"/>').bootstrapTooltip();t.strictEqual(o.attr("title"),"","title attribute was emptied")})),QUnit.test("should add data attribute for referencing original title",(function(t){t.expect(1);var o=$('<a href="#" rel="tooltip" title="Another tooltip"/>').bootstrapTooltip();t.strictEqual(o.attr("data-original-title"),"Another tooltip","original title preserved in data attribute")})),QUnit.test("should add aria-describedby to the trigger on show",(function(t){t.expect(3);var o=$('<a href="#" rel="tooltip" title="Another tooltip"/>').bootstrapTooltip().appendTo("#qunit-fixture").bootstrapTooltip("show"),e=$(".tooltip").attr("id");t.strictEqual($("#"+e).length,1,"has a unique id"),t.strictEqual($(".tooltip").attr("aria-describedby"),o.attr("id"),"tooltip id and aria-describedby on trigger match"),t.ok(o[0].hasAttribute("aria-describedby"),"trigger has aria-describedby")})),QUnit.test("should remove aria-describedby from trigger on hide",(function(t){t.expect(2);var o=t.async(),e=$('<a href="#" rel="tooltip" title="Another tooltip"/>').bootstrapTooltip().appendTo("#qunit-fixture");e.one("shown.bs.tooltip",(function(){t.ok(e[0].hasAttribute("aria-describedby"),"trigger has aria-describedby"),e.bootstrapTooltip("hide")})).one("hidden.bs.tooltip",(function(){t.ok(!e[0].hasAttribute("aria-describedby"),"trigger does not have aria-describedby"),o()})).bootstrapTooltip("show")})),QUnit.test("should assign a unique id tooltip element",(function(t){t.expect(2),$('<a href="#" rel="tooltip" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip("show");var o=$(".tooltip").attr("id");t.strictEqual($("#"+o).length,1,"tooltip has unique id"),t.strictEqual(o.indexOf("tooltip"),0,"tooltip id has prefix")})),QUnit.test("should place tooltips relative to placement option",(function(t){t.expect(2);var o=t.async(),e=$('<a href="#" rel="tooltip" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({placement:"bottom"});e.one("shown.bs.tooltip",(function(){t.ok($(".tooltip").is(".fade.bs-tooltip-bottom.show"),"has correct classes applied"),e.bootstrapTooltip("hide")})).one("hidden.bs.tooltip",(function(){t.strictEqual(e.data("bs.tooltip").tip.parentNode,null,"tooltip removed"),o()})).bootstrapTooltip("show")})),QUnit.test("should allow html entities",(function(t){t.expect(2);var o=t.async(),e=$('<a href="#" rel="tooltip" title="&lt;b&gt;@fat&lt;/b&gt;"/>').appendTo("#qunit-fixture").bootstrapTooltip({html:!0});e.one("shown.bs.tooltip",(function(){t.notStrictEqual($(".tooltip b").length,0,"b tag was inserted"),e.bootstrapTooltip("hide")})).one("hidden.bs.tooltip",(function(){t.strictEqual(e.data("bs.tooltip").tip.parentNode,null,"tooltip removed"),o()})).bootstrapTooltip("show")})),QUnit.test("should allow DOMElement title (html: false)",(function(t){t.expect(3);var o=t.async(),e=document.createTextNode("<3 writing tests"),i=$('<a href="#" rel="tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({title:e});i.one("shown.bs.tooltip",(function(){t.notStrictEqual($(".tooltip").length,0,"tooltip inserted"),t.strictEqual($(".tooltip").text(),"<3 writing tests","title inserted"),t.ok(!$.contains($(".tooltip").get(0),e),"title node copied, not moved"),o()})).bootstrapTooltip("show")})),QUnit.test("should allow DOMElement title (html: true)",(function(t){t.expect(3);var o=t.async(),e=document.createTextNode("<3 writing tests"),i=$('<a href="#" rel="tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({html:!0,title:e});i.one("shown.bs.tooltip",(function(){t.notStrictEqual($(".tooltip").length,0,"tooltip inserted"),t.strictEqual($(".tooltip").text(),"<3 writing tests","title inserted"),t.ok($.contains($(".tooltip").get(0),e),"title node moved, not copied"),o()})).bootstrapTooltip("show")})),QUnit.test("should respect custom classes",(function(t){t.expect(2);var o=t.async(),e=$('<a href="#" rel="tooltip" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({template:'<div class="tooltip some-class"><div class="tooltip-arrow"/><div class="tooltip-inner"/></div>'});e.one("shown.bs.tooltip",(function(){t.ok($(".tooltip").hasClass("some-class"),"custom class is present"),e.bootstrapTooltip("hide")})).one("hidden.bs.tooltip",(function(){t.strictEqual(e.data("bs.tooltip").tip.parentNode,null,"tooltip removed"),o()})).bootstrapTooltip("show")})),QUnit.test("should fire show event",(function(t){t.expect(1);var o=t.async();$('<div title="tooltip title"/>').on("show.bs.tooltip",(function(){t.ok(!0,"show event fired"),o()})).bootstrapTooltip("show")})),QUnit.test("should throw an error when show is called on hidden elements",(function(t){t.expect(1);var o=t.async();try{$('<div title="tooltip title" style="display: none"/>').bootstrapTooltip("show")}catch(e){t.strictEqual(e.message,"Please use show on visible elements"),o()}})),QUnit.test("should fire inserted event",(function(t){t.expect(2);var o=t.async();$('<div title="tooltip title"/>').appendTo("#qunit-fixture").on("inserted.bs.tooltip",(function(){t.notStrictEqual($(".tooltip").length,0,"tooltip was inserted"),t.ok(!0,"inserted event fired"),o()})).bootstrapTooltip("show")})),QUnit.test("should fire shown event",(function(t){t.expect(1);var o=t.async();$('<div title="tooltip title"></div>').appendTo("#qunit-fixture").on("shown.bs.tooltip",(function(){t.ok(!0,"shown was called"),o()})).bootstrapTooltip("show")})),QUnit.test("should not fire shown event when show was prevented",(function(t){t.expect(1);var o=t.async();$('<div title="tooltip title"/>').on("show.bs.tooltip",(function(e){e.preventDefault(),t.ok(!0,"show event fired"),o()})).on("shown.bs.tooltip",(function(){t.ok(!1,"shown event fired")})).bootstrapTooltip("show")})),QUnit.test("should fire hide event",(function(t){t.expect(1);var o=t.async();$('<div title="tooltip title"/>').appendTo("#qunit-fixture").on("shown.bs.tooltip",(function(){$(this).bootstrapTooltip("hide")})).on("hide.bs.tooltip",(function(){t.ok(!0,"hide event fired"),o()})).bootstrapTooltip("show")})),QUnit.test("should fire hidden event",(function(t){t.expect(1);var o=t.async();$('<div title="tooltip title"/>').appendTo("#qunit-fixture").on("shown.bs.tooltip",(function(){$(this).bootstrapTooltip("hide")})).on("hidden.bs.tooltip",(function(){t.ok(!0,"hidden event fired"),o()})).bootstrapTooltip("show")})),QUnit.test("should not fire hidden event when hide was prevented",(function(t){t.expect(1);var o=t.async();$('<div title="tooltip title"/>').appendTo("#qunit-fixture").on("shown.bs.tooltip",(function(){$(this).bootstrapTooltip("hide")})).on("hide.bs.tooltip",(function(e){e.preventDefault(),t.ok(!0,"hide event fired"),o()})).on("hidden.bs.tooltip",(function(){t.ok(!1,"hidden event fired")})).bootstrapTooltip("show")})),QUnit.test("should destroy tooltip",(function(t){t.expect(7);var o=$("<div/>").bootstrapTooltip().on("click.foo",(function(){}));t.ok(o.data("bs.tooltip"),"tooltip has data"),t.ok($._data(o[0],"events").mouseover&&$._data(o[0],"events").mouseout,"tooltip has hover events"),t.strictEqual($._data(o[0],"events").click[0].namespace,"foo","tooltip has extra click.foo event"),o.bootstrapTooltip("show"),o.bootstrapTooltip("dispose"),t.ok(!o.hasClass("show"),"tooltip is hidden"),t.ok(!$._data(o[0],"bs.tooltip"),"tooltip does not have data"),t.strictEqual($._data(o[0],"events").click[0].namespace,"foo","tooltip still has click.foo"),t.ok(!$._data(o[0],"events").mouseover&&!$._data(o[0],"events").mouseout,"tooltip does not have hover events")})),QUnit.test("should show tooltip when toggle is called",(function(t){t.expect(1),$('<a href="#" rel="tooltip" title="tooltip on toggle"/>').appendTo("#qunit-fixture").bootstrapTooltip({trigger:"manual"}).bootstrapTooltip("toggle"),t.ok($(".tooltip").is(".fade.show"),"tooltip is faded active")})),QUnit.test("should hide previously shown tooltip when toggle is called on tooltip",(function(t){t.expect(1),$('<a href="#" rel="tooltip" title="tooltip on toggle">@ResentedHook</a>').appendTo("#qunit-fixture").bootstrapTooltip({trigger:"manual"}).bootstrapTooltip("show"),$(".tooltip").bootstrapTooltip("toggle"),t.ok($(".tooltip").not(".fade.show"),"tooltip was faded out")})),QUnit.test("should place tooltips inside body when container is body",(function(t){t.expect(3);var o=t.async(),e=$('<a href="#" rel="tooltip" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({container:"body"});e.one("shown.bs.tooltip",(function(){t.notStrictEqual($("body > .tooltip").length,0,"tooltip is direct descendant of body"),t.strictEqual($("#qunit-fixture > .tooltip").length,0,"tooltip is not in parent"),e.bootstrapTooltip("hide")})).one("hidden.bs.tooltip",(function(){t.strictEqual($("body > .tooltip").length,0,"tooltip was removed from dom"),o()})).bootstrapTooltip("show")})),QUnit.test("should place tooltips inside a specific container when container is an element",(function(t){t.expect(3);var o=t.async(),e=$("<div></div>").appendTo("#qunit-fixture"),i=$('<a href="#" rel="tooltip" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({container:e[0]});i.one("shown.bs.tooltip",(function(){t.strictEqual(e.find(".tooltip").length,1),t.strictEqual($("#qunit-fixture > .tooltip").length,0,"tooltip is not in parent"),i.bootstrapTooltip("hide")})).one("hidden.bs.tooltip",(function(){t.strictEqual(e.find(".tooltip").length,0,"tooltip was removed from dom"),o()})).bootstrapTooltip("show")})),QUnit.test("should place tooltips inside a specific container when container is a selector",(function(t){t.expect(3);var o=t.async(),e=$('<div id="container"></div>').appendTo("#qunit-fixture"),i=$('<a href="#" rel="tooltip" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({container:"#container"});i.one("shown.bs.tooltip",(function(){t.strictEqual(e.find(".tooltip").length,1),t.strictEqual($("#qunit-fixture > .tooltip").length,0,"tooltip is not in parent"),i.bootstrapTooltip("hide")})).one("hidden.bs.tooltip",(function(){t.strictEqual(e.find(".tooltip").length,0,"tooltip was removed from dom"),o()})).bootstrapTooltip("show")})),QUnit.test("should add position class before positioning so that position-specific styles are taken into account",(function(t){t.expect(2);var o=t.async(),e="<style>.bs-tooltip-right { white-space: nowrap; }.bs-tooltip-right .tooltip-inner { max-width: none; }</style>",i=$(e).appendTo("head"),n=$("<div/>").appendTo("#qunit-fixture");$('<a href="#" rel="tooltip" title="very very very very very very very very long tooltip in one line"/>').appendTo(n).bootstrapTooltip({placement:"right",trigger:"manual"}).on("inserted.bs.tooltip",(function(){var e=$($(this).data("bs.tooltip").tip);t.ok(e.hasClass("bs-tooltip-right")),t.ok("undefined"===typeof e.attr("style")),i.remove(),o()})).bootstrapTooltip("show")})),QUnit.test("should use title attribute for tooltip text",(function(t){t.expect(2);var o=t.async(),e=$('<a href="#" rel="tooltip" title="Simple tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip();e.one("shown.bs.tooltip",(function(){t.strictEqual($(".tooltip").children(".tooltip-inner").text(),"Simple tooltip","title from title attribute is set"),e.bootstrapTooltip("hide")})).one("hidden.bs.tooltip",(function(){t.strictEqual($(".tooltip").length,0,"tooltip removed from dom"),o()})).bootstrapTooltip("show")})),QUnit.test("should prefer title attribute over title option",(function(t){t.expect(2);var o=t.async(),e=$('<a href="#" rel="tooltip" title="Simple tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({title:"This is a tooltip with some content"});e.one("shown.bs.tooltip",(function(){t.strictEqual($(".tooltip").children(".tooltip-inner").text(),"Simple tooltip","title is set from title attribute while preferred over title option"),e.bootstrapTooltip("hide")})).one("hidden.bs.tooltip",(function(){t.strictEqual($(".tooltip").length,0,"tooltip removed from dom"),o()})).bootstrapTooltip("show")})),QUnit.test("should use title option",(function(t){t.expect(2);var o=t.async(),e=$('<a href="#" rel="tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({title:"This is a tooltip with some content"});e.one("shown.bs.tooltip",(function(){t.strictEqual($(".tooltip").children(".tooltip-inner").text(),"This is a tooltip with some content","title from title option is set"),e.bootstrapTooltip("hide")})).one("hidden.bs.tooltip",(function(){t.strictEqual($(".tooltip").length,0,"tooltip removed from dom"),o()})).bootstrapTooltip("show")})),QUnit.test("should not error when trying to show an top-placed tooltip that has been removed from the dom",(function(t){t.expect(1);var o=!0,e=$('<a href="#" rel="tooltip" title="Another tooltip"/>').appendTo("#qunit-fixture").one("show.bs.tooltip",(function(){$(this).remove()})).bootstrapTooltip({placement:"top"});try{e.bootstrapTooltip("show")}catch(i){o=!1}t.ok(o,".tooltip('show') should not throw an error if element no longer is in dom")})),QUnit.test("should show tooltip if leave event hasn't occurred before delay expires",(function(t){t.expect(2);var o=t.async(),e=$('<a href="#" rel="tooltip" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({delay:150});setTimeout((function(){t.ok(!$(".tooltip").is(".fade.show"),"100ms: tooltip is not faded active")}),100),setTimeout((function(){t.ok($(".tooltip").is(".fade.show"),"200ms: tooltip is faded active"),o()}),200),e.trigger("mouseenter")})),QUnit.test("should not show tooltip if leave event occurs before delay expires",(function(t){t.expect(2);var o=t.async(),e=$('<a href="#" rel="tooltip" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({delay:150});setTimeout((function(){t.ok(!$(".tooltip").is(".fade.show"),"100ms: tooltip not faded active"),e.trigger("mouseout")}),100),setTimeout((function(){t.ok(!$(".tooltip").is(".fade.show"),"200ms: tooltip not faded active"),o()}),200),e.trigger("mouseenter")})),QUnit.test("should not hide tooltip if leave event occurs and enter event occurs within the hide delay",(function(t){t.expect(3);var o=t.async(),e=$('<a href="#" rel="tooltip" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({delay:{show:0,hide:150}});setTimeout((function(){t.ok($(".tooltip").is(".fade.show"),"1ms: tooltip faded active"),e.trigger("mouseout"),setTimeout((function(){t.ok($(".tooltip").is(".fade.show"),"100ms: tooltip still faded active"),e.trigger("mouseenter")}),100),setTimeout((function(){t.ok($(".tooltip").is(".fade.show"),"200ms: tooltip still faded active"),o()}),200)}),0),e.trigger("mouseenter")})),QUnit.test("should not show tooltip if leave event occurs before delay expires",(function(t){t.expect(2);var o=t.async(),e=$('<a href="#" rel="tooltip" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({delay:150});setTimeout((function(){t.ok(!$(".tooltip").is(".fade.show"),"100ms: tooltip not faded active"),e.trigger("mouseout")}),100),setTimeout((function(){t.ok(!$(".tooltip").is(".fade.show"),"200ms: tooltip not faded active"),o()}),200),e.trigger("mouseenter")})),QUnit.test("should not show tooltip if leave event occurs before delay expires, even if hide delay is 0",(function(t){t.expect(2);var o=t.async(),e=$('<a href="#" rel="tooltip" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({delay:{show:150,hide:0}});setTimeout((function(){t.ok(!$(".tooltip").is(".fade.show"),"100ms: tooltip not faded active"),e.trigger("mouseout")}),100),setTimeout((function(){t.ok(!$(".tooltip").is(".fade.show"),"250ms: tooltip not faded active"),o()}),250),e.trigger("mouseenter")})),QUnit.test("should wait 200ms before hiding the tooltip",(function(t){t.expect(3);var o=t.async(),e=$('<a href="#" rel="tooltip" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({delay:{show:0,hide:150}});setTimeout((function(){t.ok($(e.data("bs.tooltip").tip).is(".fade.show"),"1ms: tooltip faded active"),e.trigger("mouseout"),setTimeout((function(){t.ok($(e.data("bs.tooltip").tip).is(".fade.show"),"100ms: tooltip still faded active")}),100),setTimeout((function(){t.ok(!$(e.data("bs.tooltip").tip).is(".show"),"200ms: tooltip removed"),o()}),200)}),0),e.trigger("mouseenter")})),QUnit.test("should not reload the tooltip on subsequent mouseenter events",(function(t){t.expect(1);var o=function(){var t=Util.getUID("tooltip");return'<p id="tt-content">'+t+"</p><p>"+t+"</p><p>"+t+"</p>"},e=$('<span id="tt-outer" rel="tooltip" data-trigger="hover" data-placement="top">some text</span>').appendTo("#qunit-fixture");e.bootstrapTooltip({html:!0,animation:!1,trigger:"hover",delay:{show:0,hide:500},container:e,title:o}),$("#tt-outer").trigger("mouseenter");var i=$("#tt-content").text();$("#tt-content").trigger("mouseenter"),t.strictEqual(i,$("#tt-content").text())})),QUnit.test("should not reload the tooltip if the mouse leaves and re-enters before hiding",(function(t){t.expect(4);var o=function(){var t=Util.getUID("tooltip");return'<p id="tt-content">'+t+"</p><p>"+t+"</p><p>"+t+"</p>"},e=$('<span id="tt-outer" rel="tooltip" data-trigger="hover" data-placement="top">some text</span>').appendTo("#qunit-fixture");e.bootstrapTooltip({html:!0,animation:!1,trigger:"hover",delay:{show:0,hide:500},title:o});var i=e.data("bs.tooltip");$("#tt-outer").trigger("mouseenter");var n=$("#tt-content").text();$("#tt-outer").trigger("mouseleave"),t.strictEqual(n,$("#tt-content").text()),t.ok("out"===i._hoverState,'the tooltip hoverState should be set to "out"'),$("#tt-outer").trigger("mouseenter"),t.ok("show"===i._hoverState,'the tooltip hoverState should be set to "show"'),t.strictEqual(n,$("#tt-content").text())})),QUnit.test("should do nothing when an attempt is made to hide an uninitialized tooltip",(function(t){t.expect(1);var o=$('<span data-toggle="tooltip" title="some tip">some text</span>').appendTo("#qunit-fixture").on("hidden.bs.tooltip shown.bs.tooltip",(function(){t.ok(!1,"should not fire any tooltip events")})).bootstrapTooltip("hide");t.strictEqual(typeof o.data("bs.tooltip"),"undefined","should not initialize the tooltip")})),QUnit.test("should not remove tooltip if multiple triggers are set and one is still active",(function(t){t.expect(41);var o=$("<button>Trigger</button>").appendTo("#qunit-fixture").bootstrapTooltip({trigger:"click hover focus",animation:!1}),e=o.data("bs.tooltip"),i=$(e.getTipElement());function n(){return i.hasClass("show")||"show"===e._hoverState}var l=[["mouseenter","mouseleave"],["focusin","focusout"],["click","click"],["mouseenter","focusin","focusout","mouseleave"],["mouseenter","focusin","mouseleave","focusout"],["focusin","mouseenter","mouseleave","focusout"],["focusin","mouseenter","focusout","mouseleave"],["click","focusin","mouseenter","focusout","mouseleave","click"],["mouseenter","click","focusin","focusout","mouseleave","click"],["mouseenter","focusin","click","click","mouseleave","focusout"]];t.ok(!n()),$.each(l,(function(e,i){for(var l=0,s=i.length;l<s;l++)o.trigger(i[l]),t.strictEqual(l<s-1,n())}))})),QUnit.test("should show on first trigger after hide",(function(t){t.expect(3);var o=$('<a href="#" rel="tooltip" title="Test tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({trigger:"click hover focus",animation:!1}),e=o.data("bs.tooltip"),i=$(e.getTipElement());function n(){return i.hasClass("show")||"show"===e._hoverState}o.trigger("click"),t.ok(n(),"tooltip is faded in"),o.bootstrapTooltip("hide"),t.ok(!n(),"tooltip was faded out"),o.trigger("click"),t.ok(n(),"tooltip is faded in again")})),QUnit.test("should hide tooltip when their containing modal is closed",(function(t){t.expect(1);var o=t.async(),e='<div id="modal-test" class="modal"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body"><a id="tooltipTest" href="#" data-toggle="tooltip" title="Some tooltip text!">Tooltip</a></div></div></div></div>';$(e).appendTo("#qunit-fixture"),$("#tooltipTest").bootstrapTooltip({trigger:"manuel"}).on("shown.bs.tooltip",(function(){$("#modal-test").modal("hide")})).on("hide.bs.tooltip",(function(){t.ok(!0,"tooltip hide"),o()})),$("#modal-test").on("shown.bs.modal",(function(){$("#tooltipTest").bootstrapTooltip("show")})).modal("show")})),QUnit.test("should allow to close modal if the tooltip element is detached",(function(t){t.expect(1);var o=t.async(),e=['<div id="modal-test" class="modal">','  <div class="modal-dialog" role="document">','    <div class="modal-content">','      <div class="modal-body">','        <a id="tooltipTest" href="#" data-toggle="tooltip" title="Some tooltip text!">Tooltip</a>',"      </div>","    </div>","  </div>","</div>"].join("");$(e).appendTo("#qunit-fixture");var i=$("#tooltipTest"),n=$("#modal-test");i.on("shown.bs.tooltip",(function(){i.detach(),i.bootstrapTooltip("dispose"),n.modal("hide")})),n.on("shown.bs.modal",(function(){i.bootstrapTooltip({trigger:"manuel"}).bootstrapTooltip("show")})).on("hidden.bs.modal",(function(){t.ok(!0,"modal hidden"),o()})).modal("show")})),QUnit.test("should reset tip classes when hidden event triggered",(function(t){t.expect(2);var o=t.async(),e=$('<a href="#" rel="tooltip" title="Test tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip("show").on("hidden.bs.tooltip",(function(){var i=e.data("bs.tooltip"),n=$(i.getTipElement());t.ok(n.hasClass("tooltip")),t.ok(n.hasClass("fade")),o()}));e.bootstrapTooltip("hide")})),QUnit.test("should convert number in title to string",(function(t){t.expect(1);var o=t.async(),e=$('<a href="#" rel="tooltip" title="7"/>').appendTo("#qunit-fixture").on("shown.bs.tooltip",(function(){var i=e.data("bs.tooltip"),n=$(i.getTipElement());t.strictEqual(n.children().text(),"7"),o()}));e.bootstrapTooltip("show")})),QUnit.test("tooltip should be shown right away after the call of disable/enable",(function(t){t.expect(2);var o=t.async(),e=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip().on("shown.bs.tooltip",(function(){t.strictEqual($(".tooltip").hasClass("show"),!0),o()}));e.bootstrapTooltip("disable"),e.trigger($.Event("click")),setTimeout((function(){t.strictEqual(0===$(".tooltip").length,!0),e.bootstrapTooltip("enable"),e.trigger($.Event("click"))}),200)})),QUnit.test("should call Popper.js to update",(function(t){t.expect(2);var o=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip(),e=o.data("bs.tooltip");e.show(),t.ok(e._popper);var i=sinon.spy(e._popper,"scheduleUpdate");e.update(),t.ok(i.called)})),QUnit.test("should not call Popper.js to update",(function(t){t.expect(1);var o=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip(),e=o.data("bs.tooltip");e.update(),t.ok(null===e._popper)})),QUnit.test("should use Popper.js to get the tip on placement change",(function(t){t.expect(1);var o=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip(),e=$('<div class="bs-tooltip" />').appendTo("#qunit-fixture"),i=o.data("bs.tooltip");i.tip=null,i._handlePopperPlacementChange({instance:{popper:e[0]},placement:"auto"}),t.ok(i.tip===e[0])})),QUnit.test("should toggle enabled",(function(t){t.expect(3);var o=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip(),e=o.data("bs.tooltip");t.strictEqual(e._isEnabled,!0),e.toggleEnabled(),t.strictEqual(e._isEnabled,!1),e.toggleEnabled(),t.strictEqual(e._isEnabled,!0)})),QUnit.test("should create offset modifier correctly when offset option is a function",(function(t){t.expect(2);var o=function(t){return t},e=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({offset:o}),i=e.data("bs.tooltip"),n=i._getOffset();t.ok("undefined"===typeof n.offset),t.ok("function"===typeof n.fn)})),QUnit.test("should create offset modifier correctly when offset option is not a function",(function(t){t.expect(2);var o=42,e=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({offset:o}),i=e.data("bs.tooltip"),n=i._getOffset();t.strictEqual(n.offset,o),t.ok("undefined"===typeof n.fn)})),QUnit.test("should disable sanitizer",(function(t){t.expect(1);var o=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({sanitize:!1}),e=o.data("bs.tooltip");t.strictEqual(e.config.sanitize,!1)})),QUnit.test("should sanitize template by removing disallowed tags",(function(t){t.expect(1);var o=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({template:["<div>",'  <script>console.log("oups script inserted")<\/script>',"  <span>Some content</span>","</div>"].join("")}),e=o.data("bs.tooltip");t.strictEqual(e.config.template.indexOf("script"),-1)})),QUnit.test("should sanitize template by removing disallowed attributes",(function(t){t.expect(1);var o=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({template:["<div>",'  <img src="x" onError="alert(\'test\')">Some content</img>',"</div>"].join("")}),e=o.data("bs.tooltip");t.strictEqual(e.config.template.indexOf("onError"),-1)})),QUnit.test("should sanitize template by removing tags with XSS",(function(t){t.expect(1);var o=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({template:["<div>",'  <a href="javascript:alert(7)">Click me</a>',"  <span>Some content</span>","</div>"].join("")}),e=o.data("bs.tooltip");t.strictEqual(e.config.template.indexOf("script"),-1)})),QUnit.test("should allow custom sanitization rules",(function(t){t.expect(2);var o=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({template:['<a href="javascript:alert(7)">Click me</a>',"<span>Some content</span>"].join(""),whiteList:{span:null}}),e=o.data("bs.tooltip");t.strictEqual(e.config.template.indexOf("<a"),-1),t.ok(-1!==e.config.template.indexOf("span"))})),QUnit.test("should allow passing a custom function for sanitization",(function(t){t.expect(1);var o=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({template:["<span>Some content</span>"].join(""),sanitizeFn:function(t){return t}}),e=o.data("bs.tooltip");t.ok(-1!==e.config.template.indexOf("span"))})),QUnit.test("should allow passing aria attributes",(function(t){t.expect(1);var o=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({template:['<span aria-pressed="true">Some content</span>'].join("")}),e=o.data("bs.tooltip");t.ok(-1!==e.config.template.indexOf("aria-pressed"))})),QUnit.test("should not sanitize element content",(function(t){t.expect(1);var o=$("<div />").appendTo("#qunit-fixture"),e="<script>var test = 1;<\/script>",i=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({template:['<span aria-pressed="true">Some content</span>'].join(""),html:!0,sanitize:!1}),n=i.data("bs.tooltip");n.setElementContent(o,e),t.strictEqual(o[0].innerHTML,e)})),QUnit.test("should not take into account sanitize in data attributes",(function(t){t.expect(1);var o=$('<a href="#" rel="tooltip" data-sanitize="false" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({template:['<span aria-pressed="true">Some content</span>'].join("")}),e=o.data("bs.tooltip");t.strictEqual(e.config.sanitize,!0)})),QUnit.test("should allow to pass config to popper.js with `popperConfig`",(function(t){t.expect(1);var o=$('<a href="#" rel="tooltip" data-trigger="click" title="Another tooltip"/>').appendTo("#qunit-fixture").bootstrapTooltip({popperConfig:{placement:"left"}}),e=o.data("bs.tooltip"),i=e._getPopperConfig("top");t.strictEqual(i.placement,"left")}))}));