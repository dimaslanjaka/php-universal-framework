var UIDvalue=getUID();function currentUID(){return UIDvalue}function getUID(){return localStorage.getItem("uid")}function sign_uid(UID){var url=location.protocol+"//"+location.host+location.pathname;"undefined"!=typeof jQuery?$.ajax({url:url,dataType:"jsonp",method:"post",headers:{"Uid-Sign":guid()},data:{uid_jsp:1,callback:"saveUID",uid:UID},silent:!0,success:function(e){console.log(e),e.hasOwnProperty("uid")&&localStorage.setItem("uid",e.uid)}}):ajax().post(url,{uid_jsp:genUID(),callback:"saveUID",uid:UID},(function(res){console.log(res),eval(res)}))}var UIDcalled=!1;function checkUID(e){return UIDvalue=getUID(),isExpireUID()&&(UIDvalue=genUID(),sign_uid(UIDvalue)),UIDcalled||(setTimeout((function(){checkUID()}),6e4),UIDcalled=!0),UIDvalue=getUID(),"function"==typeof e?e(UIDvalue):UIDvalue}function isExpireUID(){if("boolean"==typeof UIDForce&&UIDForce)return console.log("UID FORCED"),delete UIDForce,!0;var e=framework().gc("signature-timeleft");e=new Date(e).getTime();var t=(new Date).getTime(),o=e<t;return!!o||!localStorage.getItem("uid")}function AddMinutesToDate(e,t){return new Date(e.getTime()+6e4*t)}function genUID(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function saveUID(e){if(console.log(e),"object"==typeof e&&e.hasOwnProperty("uid")){console.log(e.uid+" was saved"),localStorage.setItem("uid",e.uid);var t=new Date;framework().sc("signature-timeleft",AddMinutesToDate(t,5))}}