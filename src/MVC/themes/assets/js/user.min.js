var user=function(){function e(){this.key=location.host+"/userdata"}return e.prototype.all=function(){var e=localStorage.getItem(this.key);if(e&&""!=e)return JSON.parse(e)},e.prototype.get=function(e){try{var t=this.all();if(void 0!==t&&t.hasOwnProperty(e.toString()))return t[e.toString()];console.log("user::get",t)}catch(r){return void console.error("user::get",r)}},e.prototype.fetch=function(e){var t=this;return $.ajax({url:"/user",method:"POST",data:{check:!0,user:!0},success:function(r){"object"==typeof r&&(r&&(r.hasOwnProperty("id")&&(r.user_id=r.id,r._=new Date),r.hasOwnProperty("username")&&"function"==typeof e&&e(r)),localStorage.setItem(t.key,JSON.stringify(r)),console.log("user::fetch",t.all()))}})},e}(),userc=new user;"undefined"===typeof window.user&&(window.user=userc),jQuery.user=userc;