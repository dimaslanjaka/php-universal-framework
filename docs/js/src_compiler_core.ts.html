

<!DOCTYPE html>
<html lang="en">

<head>
  <script data-ad-client="ca-pub-1165447249910969" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106238155-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-106238155-1');
</script>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Universal Framework Javascript Documentation src/compiler/core.ts</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
             
                <a class="image" href="index.html">
                    <img src="/hero.svg" alt="logo">
                </a>
            
             
                <a href="index.html">
                    <h1 class="navbar-item">Universal Framework Javascript Documentation</h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    API Documentation
                </a>
                
                <div class="dropdown is-hoverable is-right">
                    <a class="dropdown-trigger link">
                        Tutorials
                        <i class="fas fa-chevron-down fa-xs"></i>
                    </a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                        
                            <a class="dropdown-item" href="tutorial-node-localstorage.html">
                                node-localstorage
                            </a>
                        
                        </div>
                    </div>
                </div>
                
                 
                    
                        <a
                            class="link user-link "
                            href="https://github.com/dimaslanjaka/universal-framework"
                        >
                            Github
                        </a>
                    
                        <a
                            class="link user-link "
                            href="/universal-framework/php"
                        >
                            PHP API
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://webmanajemen.com"
                        >
                            Blog
                        </a>
                    
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
                <div class="search-wrapper">
                    <input id="search" type="text" placeholder="Search docs..." class="input">
                </div>
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"><h3>Classes</h3><ul><li><a href="ajaxScheduler.html">ajaxScheduler</a></li><li><a href="Cookies.html">Cookies</a></li><li><a href="core.html">core</a></li><li><a href="GeneratorID.html">GeneratorID</a></li><li><a href="ip.html">ip</a></li><li><a href="Timer.html">Timer</a></li><li><a href="user.html">user</a></li><li><a href="ZLIB.html">ZLIB</a></li></ul><h3>Interfaces</h3><ul><li><a href="Array.html">Array</a></li><li><a href="createElementOpt.html">createElementOpt</a></li><li><a href="HTMLScriptElement.html">HTMLScriptElement</a></li><li><a href="String.html">String</a></li><li><a href="Window.html">Window</a></li></ul><h3>Global</h3><ul><li><a href="global.html#___call">___call</a></li><li><a href="global.html#__call">__call</a></li><li><a href="global.html#aesDecrypt">aesDecrypt</a></li><li><a href="global.html#aesEncrypt">aesEncrypt</a></li><li><a href="global.html#aform">aform</a></li><li><a href="global.html#AJAX">AJAX</a></li><li><a href="global.html#AjaxForm">AjaxForm</a></li><li><a href="global.html#ajaxRun">ajaxRun</a></li><li><a href="global.html#ajx">ajx</a></li><li><a href="global.html#analys">analys</a></li><li><a href="global.html#array_keys">array_keys</a></li><li><a href="global.html#array_rand">array_rand</a></li><li><a href="global.html#array_remove">array_remove</a></li><li><a href="global.html#array_shuffle">array_shuffle</a></li><li><a href="global.html#array_unique">array_unique</a></li><li><a href="global.html#array_unset">array_unset</a></li><li><a href="global.html#asset">asset</a></li><li><a href="global.html#async">async</a></li><li><a href="global.html#async_exec">async_exec</a></li><li><a href="global.html#async_process">async_process</a></li><li><a href="global.html#async_this">async_this</a></li><li><a href="global.html#autoHeight_">autoHeight_</a></li><li><a href="global.html#bannedebug">bannedebug</a></li><li><a href="global.html#Base64">Base64</a></li><li><a href="global.html#base64_decode">base64_decode</a></li><li><a href="global.html#base64_encode">base64_encode</a></li><li><a href="global.html#base64_valid">base64_valid</a></li><li><a href="global.html#binl2rstr">binl2rstr</a></li><li><a href="global.html#binlMD5">binlMD5</a></li><li><a href="global.html#bitRotateLeft">bitRotateLeft</a></li><li><a href="global.html#build">build</a></li><li><a href="global.html#call_user_func">call_user_func</a></li><li><a href="global.html#compileAssets">compileAssets</a></li><li><a href="global.html#config_builder">config_builder</a></li><li><a href="global.html#copyToClipboard">copyToClipboard</a></li><li><a href="global.html#count">count</a></li><li><a href="global.html#countNewLines">countNewLines</a></li><li><a href="global.html#countries">countries</a></li><li><a href="global.html#createAlert">createAlert</a></li><li><a href="global.html#createApp">createApp</a></li><li><a href="global.html#createElement">createElement</a></li><li><a href="global.html#createJSON">createJSON</a></li><li><a href="global.html#createStyle">createStyle</a></li><li><a href="global.html#CryptoD">CryptoD</a></li><li><a href="global.html#CryptoE">CryptoE</a></li><li><a href="global.html#CryptoK">CryptoK</a></li><li><a href="global.html#datatables_colums_options">datatables_colums_options</a></li><li><a href="global.html#datatables_init">datatables_init</a></li><li><a href="global.html#datatables_optimize">datatables_optimize</a></li><li><a href="global.html#debug_detect">debug_detect</a></li><li><a href="global.html#doc">doc</a></li><li><a href="global.html#dumpAjax">dumpAjax</a></li><li><a href="global.html#elm">elm</a></li><li><a href="global.html#empty">empty</a></li><li><a href="global.html#execute">execute</a></li><li><a href="global.html#extend_setting_form">extend_setting_form</a></li><li><a href="global.html#findDups">findDups</a></li><li><a href="global.html#fixDeps">fixDeps</a></li><li><a href="global.html#forceSSL">forceSSL</a></li><li><a href="global.html#foreach">foreach</a></li><li><a href="global.html#formatNewLines">formatNewLines</a></li><li><a href="global.html#formsaver">formsaver</a></li><li><a href="global.html#framework">framework</a></li><li><a href="global.html#generateRandomString">generateRandomString</a></li><li><a href="global.html#get_currency_symbol">get_currency_symbol</a></li><li><a href="global.html#get_unique_id">get_unique_id</a></li><li><a href="global.html#getAnyClass">getAnyClass</a></li><li><a href="global.html#getCountries">getCountries</a></li><li><a href="global.html#getFuncName">getFuncName</a></li><li><a href="global.html#getKey">getKey</a></li><li><a href="global.html#getLatestVersion">getLatestVersion</a></li><li><a href="global.html#getLocationHash">getLocationHash</a></li><li><a href="global.html#getNativeClass">getNativeClass</a></li><li><a href="global.html#geToken">geToken</a></li><li><a href="global.html#getParameterByName">getParameterByName</a></li><li><a href="global.html#getRandom">getRandom</a></li><li><a href="global.html#gexec">gexec</a></li><li><a href="global.html#guid">guid</a></li><li><a href="global.html#hexHMACMD5">hexHMACMD5</a></li><li><a href="global.html#hexMD5">hexMD5</a></li><li><a href="global.html#http_build_query">http_build_query</a></li><li><a href="global.html#in_array">in_array</a></li><li><a href="global.html#inArray">inArray</a></li><li><a href="global.html#indicatorAjax">indicatorAjax</a></li><li><a href="global.html#inputrp">inputrp</a></li><li><a href="global.html#is_development">is_development</a></li><li><a href="global.html#is_localhost">is_localhost</a></li><li><a href="global.html#isBrowser">isBrowser</a></li><li><a href="global.html#isJSON">isJSON</a></li><li><a href="global.html#isMobile">isMobile</a></li><li><a href="global.html#isnode">isnode</a></li><li><a href="global.html#isNode">isNode</a></li><li><a href="global.html#isOffline">isOffline</a></li><li><a href="global.html#jAjax">jAjax</a></li><li><a href="global.html#JavaScriptCaller">JavaScriptCaller</a></li><li><a href="global.html#json_decode">json_decode</a></li><li><a href="global.html#L">L</a></li><li><a href="global.html#list_package">list_package</a></li><li><a href="global.html#load_datatables">load_datatables</a></li><li><a href="global.html#load_disqus">load_disqus</a></li><li><a href="global.html#load_module">load_module</a></li><li><a href="global.html#load_requirejs">load_requirejs</a></li><li><a href="global.html#loadCodemirror">loadCodemirror</a></li><li><a href="global.html#loadCSS">loadCSS</a></li><li><a href="global.html#LoadScript">LoadScript</a></li><li><a href="global.html#makeid">makeid</a></li><li><a href="global.html#md5">md5</a></li><li><a href="global.html#md5cmn">md5cmn</a></li><li><a href="global.html#md5ff">md5ff</a></li><li><a href="global.html#md5gg">md5gg</a></li><li><a href="global.html#md5hh">md5hh</a></li><li><a href="global.html#md5ii">md5ii</a></li><li><a href="global.html#module_exists">module_exists</a></li><li><a href="global.html#multiMinify">multiMinify</a></li><li><a href="global.html#object_join">object_join</a></li><li><a href="global.html#onlyUnique">onlyUnique</a></li><li><a href="global.html#openInNewTab">openInNewTab</a></li><li><a href="global.html#pagination_up">pagination_up</a></li><li><a href="global.html#parse_proxy">parse_proxy</a></li><li><a href="global.html#parseNumber">parseNumber</a></li><li><a href="global.html#parsePackageString">parsePackageString</a></li><li><a href="global.html#prepEntities">prepEntities</a></li><li><a href="global.html#pseudo_builder">pseudo_builder</a></li><li><a href="global.html#Queue">Queue</a></li><li><a href="global.html#random_rgba">random_rgba</a></li><li><a href="global.html#rawHMACMD5">rawHMACMD5</a></li><li><a href="global.html#rawMD5">rawMD5</a></li><li><a href="global.html#readFile">readFile</a></li><li><a href="global.html#recaptcha">recaptcha</a></li><li><a href="global.html#reload_gulp">reload_gulp</a></li><li><a href="global.html#resolve_dir">resolve_dir</a></li><li><a href="global.html#restrict_mode">restrict_mode</a></li><li><a href="global.html#rstr2binl">rstr2binl</a></li><li><a href="global.html#rstr2hex">rstr2hex</a></li><li><a href="global.html#rstrHMACMD5">rstrHMACMD5</a></li><li><a href="global.html#rstrMD5">rstrMD5</a></li><li><a href="global.html#safeAdd">safeAdd</a></li><li><a href="global.html#salt">salt</a></li><li><a href="global.html#select2Country">select2Country</a></li><li><a href="global.html#setEventListener">setEventListener</a></li><li><a href="global.html#shuffle">shuffle</a></li><li><a href="global.html#single_tsCompile">single_tsCompile</a></li><li><a href="global.html#socket">socket</a></li><li><a href="global.html#stacktrace">stacktrace</a></li><li><a href="global.html#storage">storage</a></li><li><a href="global.html#str2rstrUTF8">str2rstrUTF8</a></li><li><a href="global.html#tafocus">tafocus</a></li><li><a href="global.html#textAreas">textAreas</a></li><li><a href="global.html#toogleClass">toogleClass</a></li><li><a href="global.html#trycatch">trycatch</a></li><li><a href="global.html#typescriptCompiler">typescriptCompiler</a></li><li><a href="global.html#uniqid">uniqid</a></li><li><a href="global.html#userJSDecrypt">userJSDecrypt</a></li><li><a href="global.html#userJSEncrypt">userJSEncrypt</a></li><li><a href="global.html#uuidv4">uuidv4</a></li><li><a href="global.html#views">views</a></li><li><a href="global.html#writeFile">writeFile</a></li><li><a href="global.html#writenow">writenow</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Source</p>
                    <h1>src/compiler/core.ts</h1>
                </header>
                



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as fs from "fs";
import * as Terser from "terser";
import * as path from "path";
import slash from "slash";
import * as JavaScriptObfuscator from "javascript-obfuscator";
import log from "./log";
import * as uglifycss from "uglifycss";
import * as sass from "sass";
import { exec } from "child_process";
import "../node-localstorage/src/index";
import configuration from "./config";
import * as framework from "./framework";
import filemanager from "./filemanager";
import less from "less";

/**
 * @class Core compiler
 * @author Dimas Lanjaka &lt;dimaslanjaka@gmail.com>
 */
class core {
  static log = log;
  log = log;

  /**
   * config.json
   */
  static config() {
    return configuration;
  }

  /**
   * filter array after deletion
   * @param arr
   */
  static array_filter(arr: any[]) {
    return arr.filter(function (el) {
      return el != null;
    });
  }

  /**
   * return Asynchronous function (Promise)
   * @param callback
   */
  static async(callback: Function) {
    return new Promise(function (resolve) {
      if (typeof callback == "function") {
        callback();
      }
      resolve(true);
    });
  }

  /**
   * Composer
   * @param dir directory has composer.json
   * @param type
   */
  static composer(dir: string, type: "update" | "install" | "validate" | "upgrade" | "self-update") {
    if (type) {
      exec(
        `cd ${dir} &amp;&amp; php libs/bin/composer/composer.phar ${type}`,
        (error: { message: any }, stdout: any, stderr: any) => {
          if (error) {
            log.log(log.error(`error: ${error.message}`));
            return;
          }
          if (stderr) {
            log.log(`stderr: ${stderr}`);
            return;
          }
          log.log(`stdout: ${stdout}`);
        }
      );
    }
  }

  /**
   * @param dir
   * @param [filelist]
   * @return
   */
  static readdir(dir: string, filelist: string[] = null, exclude: Array&lt;string | RegExp> = null): Array&lt;any> {
    if (!dir) return null;
    var self = this;
    if (!dir.toString().endsWith("/")) {
      dir += "/";
    }
    var files = fs.readdirSync(dir);
    filelist = filelist || [];
    files.forEach(function (file) {
      if (fs.statSync(dir + file).isDirectory()) {
        filelist = self.readdir(dir + file + "/", filelist, exclude);
      } else {
        filelist.push(path.resolve(dir + file));
      }
    });
    if (exclude &amp;&amp; exclude.length) {
      exclude.forEach(function (ex) {
        filelist = filelist.filter(function (item) {
          var allow = null;
          if (ex instanceof RegExp) {
            allow = !ex.test(item);
          } else {
            var matches = item.indexOf(ex) !== -1;
            allow = !matches;
          }
          //console.log(allow, ex);
          return allow;
        });
      });
    }

    return filelist;
  }

  /**
   * Is Node or CommonJS Browser
   */
  static isNode() {
    var isNode = false;
    if (typeof module !== "undefined" &amp;&amp; module.exports) {
      isNode = true;
    }
    return isNode;
  }

  /**
   * File Log Output Console
   * @param file
   */
  static filelog(file: string) {
    return path.join(
      core.normalize(path.dirname(file)).replace(core.normalize(process.cwd()), ""),
      path.basename(file)
    );
  }

  /**
   * transform *.browserify to .js
   * @param filename filepath
   */
  static browserify(filename: string) {
    const self = this;
    const exists = fs.existsSync(filename);
    if (exists) {
      const output = filename.toString().replace(/\.browserify\.js/s, ".js");
      exec(`browserify -t [ babelify --presets [ es2015 ] ] ${filename} -o ${output}`);
      log.log(`${self.filelog(filename.toString())} > ${self.filelog(output.toString())} ${log.success("success")}`);
    }
  }

  /**
   * Compile filename.scss to filename.css and filename.min.css
   * @param filename
   */
  static scss(filename: string) {
    const self = this;
    const exists = fs.existsSync(filename);
    if (exists) {
      if (exists) {
        var output = filename.toString().replace(/\.scss/s, ".css");
        var outputcss = output;
        if (/\.scss$/s.test(filename.toString()) &amp;&amp; !/\.min\.scss$/s.test(filename.toString())) {
          sass.render(
            {
              file: filename.toString(),
              outputStyle: "expanded",
              outFile: output,
            },
            function (err, result) {
              if (!err) {
                fs.writeFile(outputcss, result.css.toString(), function (err) {
                  if (!err) {
                    log.log(
                      `${log.chalk().red(self.filelog(filename.toString()))} > ${log
                        .chalk()
                        .blueBright(self.filelog(outputcss))} ${log.success("success")}`
                    );
                    core.minCSS(output, null);
                  } else {
                    log.log(log.error(err.message));
                  }
                });
              }
            }
          );
        }
      } else {
        console.error(`${filename} not found`);
      }
    }
  }

  static exists(filename: string): boolean {
    return fs.existsSync(filename);
  }

  static less(filename: string) {
    const self = this;
    const exists = fs.existsSync(filename);
    if (exists) {
      var outputcss = filename.toString().replace(/\.less/s, ".css");
      var source = fs.readFileSync(filename).toString();
      less
        .render(source, { sourceMap: { sourceMapFileInline: true } })
        .then(function (output) {
          fs.writeFileSync(outputcss, output.css, { encoding: "utf-8" });
          log.log(
            `${log.chalk().hex("#1d365d").bgWhite(self.filelog(filename))} > ${log
              .chalk()
              .blueBright(self.filelog(outputcss))} ${log.success("success")}`
          );
        })
        .catch(function (e) {
          console.log(
            `${log.chalk().hex("#1d365d")(self.filelog(filename))} > ${log
              .chalk()
              .blueBright(self.filelog(outputcss))} ${log.chalk().redBright("failed")}`
          );
        });
    }
  }

  /**
   * Compile LESS to CSS
   * @param from less path file
   * @param to to css path file
   * @example compileLESS('src/test.less', 'dist/test.css')
   */
  static compileLESS(from: string, to: string) {
    from = path.join(__dirname, from);
    to = path.join(__dirname, to);
    var self = this;
    fs.readFile(from, function (err, data) {
      if (err) return;
    });
  }

  /**
   * Get root path
   * @returns {string} posix/unix path format
   */
  static root(): string {
    var appDir = slash(path.dirname(require.main.filename)).toString();
    if (/\/libs\/compiler$/s.test(appDir)) {
      var split = appDir.split("/");
      split = split.slice(0, -2);
      appDir = split.join("/");
    }
    return appDir;
  }

  /**
   * Minify all js file to format *.min.js
   * @param {string} folder
   */
  static minify_folder(folder: string) {
    var self = this;
    var js = [];
    fs.exists(folder, function (exists) {
      if (exists &amp;&amp; fs.lstatSync(folder).isDirectory()) {
        var read = self.readdir(folder, [], []);
        if (Array.isArray(read)) {
          read.forEach((file) => {
            if (!/\.min\.js$/s.test(file) &amp;&amp; /\.js$/s.test(file)) {
              js.push(file);
              //log(file);
            }
          });
          js.filter(function (el) {
            return el != null;
          }).forEach(function (file: string) {
            if (file) self.minJS(file);
          });
        }
      }
    });
  }

  /**
   * Obfuscate Javascript
   * @param {string} filejs
   */
  static obfuscate(filejs: string) {
    const self = this;
    if (!/\.obfuscated\.js$/s.test(filejs) &amp;&amp; filejs.endsWith(".js")) {
      var output = filejs.replace(/\.js/s, ".obfuscated.js");
      fs.readFile(
        filejs,
        {
          encoding: "utf-8",
        },
        function (err, data) {
          if (!err) {
            var obfuscationResult = JavaScriptObfuscator.obfuscate(data, {
              compact: true,
              controlFlowFlattening: true,
            });

            fs.writeFile(output, obfuscationResult.getObfuscatedCode(), function (err) {
              if (!err) {
                log.log(`${self.filelog(filejs)} > ${self.filelog(output)} ${log.success("success")}`);
              }
            });
          }
        }
      );
    }
  }

  /**
   * Minify JS into *.min.js version
   * @param {string} file
   */
  static minJS(file: string) {
    const self = this;
    if (!file) {
      return;
    }

    if (/\.min\.js$/s.test(file) || !/\.js$/s.test(file)) {
      log.log(log.error(`${file} minJS Not Allowed`));
      return;
    }
    var min = file.replace(/\.js$/s, ".min.js");
    //log(min);
    if (!fs.existsSync(file)) {
      log.log(log.random(file) + log.error(" not found"));
      return null;
    }
    fs.readFile(
      file,
      {
        encoding: "utf-8",
      },
      function (err, data) {
        if (!err) {
          fs.writeFile(min, data, function (err) {
            if (err) {
              console.error(err);
            } else {
              const terserResult = Terser.minify(fs.readFileSync(min, "utf8"), {
                parse: {
                  ecma: 8,
                },
                compress: {
                  ecma: 5,
                  warnings: false,
                  arrows: false,
                  collapse_vars: false,
                  comparisons: false,
                  computed_props: false,
                  hoist_funs: false,
                  hoist_props: false,
                  hoist_vars: false,
                  inline: false,
                  loops: false,
                  negate_iife: false,
                  properties: false,
                  reduce_funcs: false,
                  reduce_vars: false,
                  switches: false,
                  toplevel: false,
                  typeofs: false,
                  booleans: true,
                  if_return: true,
                  sequences: true,
                  unused: true,
                  conditionals: true,
                  dead_code: true,
                  evaluate: true,
                },
                mangle: {
                  safari10: true,
                },
                output: {
                  ecma: 5,
                  comments: false,
                  ascii_only: true,
                },
              });

              var input = self.filelog(file);
              var output = self.filelog(min);
              if (terserResult.error) {
                log.log(
                  `${log.chalk().yellow(input)} > ${log.chalk().yellowBright(output)} ${log.chalk().red("fail")}`
                );
                fs.exists(min, function (ex) {
                  if (ex) {
                    filemanager.unlink(min, false);
                    log.log(log.chalk().yellowBright(core.filelog(min)) + log.chalk().redBright(" deleted"));
                  }
                });
              } else {
                fs.writeFileSync(min, terserResult.code, "utf8");
                log.log(`${log.chalk().yellow(input)} > ${log.chalk().yellowBright(output)} ${log.success("success")}`);
              }
            }
          });
        } else {
          log.log(err);
        }
      }
    );
  }

  /**
   * smart delete file
   * @param {string} file
   */
  static unlink(file: string) {
    return filemanager.unlink(file, false);
  }

  /**
   * format path to unix path
   * @param {string} path
   * @returns {string|null}
   */
  static normalize(path: string): string | null {
    return typeof slash(path) == "string" ? slash(path).replace(/\/{2,99}/s, "/") : null;
  }

  /**
   * Determine OS is windows
   */
  static isWin() {
    return process.platform === "win32";
  }

  /**
   * minify css to *.min.css version
   * @param file
   * @param callback
   */
  static minCSS(file: string, callback: Function | null = null) {
    const self = this;
    fs.exists(file, function (exists) {
      if (exists &amp;&amp; !/\.min\.css$/s.test(file) &amp;&amp; /\.css$/s.test(file)) {
        var min = file.replace(/\.css/s, ".min.css");
        fs.readFile(
          file,
          {
            encoding: "utf-8",
          },
          function (err, data) {
            if (!err) {
              fs.writeFile(min, data, function (err) {
                if (!err) {
                  var minified = uglifycss.processFiles([min], {
                    maxLineLen: 500,
                    expandVars: true,
                  });
                  fs.writeFile(
                    min,
                    minified,
                    {
                      encoding: "utf-8",
                    },
                    function (err) {
                      if (!err) {
                        if (typeof callback != "function") {
                          log.log(
                            `${log.chalk().blueBright(self.filelog(file))} > ${log
                              .chalk()
                              .blueBright(self.filelog(min))} ${log.chalk().green("success")}`
                          );
                        } else {
                          callback(true, file, min);
                        }
                      }
                    }
                  );
                } else {
                  log.log(log.chalk().red(err));
                }
              });
            } else {
              log.log(log.chalk().red(err));
            }
          }
        );
      }
    });
  }
}

Object.assign(core, filemanager, framework.dimas);

export = core;
</code></pre>
        </article>
    </section>




            </div>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

<script src="scripts/search.js"> </script>

</body>
</html>
