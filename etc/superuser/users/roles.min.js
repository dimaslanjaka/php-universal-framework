function deleteRole(e){console.log(getFuncName(),e)}AjaxForm();var dataSource=[],clonedCol=null;function initializeSelect2(){jQuery('[id^="select-"],select.select2').each((function(e,t){var i=jQuery(this);if(i.data("select2"))console.error("select2 already initialized on "+i.attr("id"));else{i.select2({data:dataSource.filter(onlyUnique),theme:"material",placeholder:"Select a route",allowClear:!0});var a=jQuery(this).data("key");a&&a.length&&i.val(a).trigger("change")}}))}function uinitializeSelect2(){jQuery('[id^="select-"],select.select2').each((function(e,t){var i=jQuery(this);i.data("select2")&&i.select2("destroy")}))}function buildData(e){var t=$("form#access-management").find("div[id^=Roles-]");t.length&&t.each((function(e,t){var i=$(this).find("select");if(i.length)for(let c=1;c<i.length;c++){var a=i[c];a.setAttribute("name",`access[${i[0].value}][]`)}}))}function onlyUnique(e,t,i){return i.indexOf(e)===t}jQuery(document).ready((function(){load_module(["select2"],(function(){loadCSS("/assets/css/select2.min.css",(function(){$.ajax({url:"",method:"post",data:{getAccess:guid()},success:function(e){e&&Array.isArray(e)&&e.forEach((function(e,t){dataSource.push({text:e,id:e})})),initializeSelect2()}})}))})),$('[id^="add-select-"]').click((function(e){e.preventDefault()})),jQuery(document).on("change",'select[id^="Roles-"],select[id^="Access-"]',buildData),jQuery("#addAccess").click((function(e){e.preventDefault(),uinitializeSelect2();var t=jQuery('div[id^="Roles-"]');if(t.length){var i=t[0].cloneNode(!0);i.setAttribute("id",uniqid("Roles-")),$(i).find("select, button").each((function(){$(this).attr("id",uniqid("Roles-")),$(this).attr("value")&&$(this).val("")})),$("#access-wrapper")[0].appendChild(i)}initializeSelect2()}))}));