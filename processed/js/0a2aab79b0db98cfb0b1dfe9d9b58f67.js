$(document).ready((function(){setTimeout(()=>{$(".mdb-select").not(".select-wrapper").materialSelect(),$("input,textarea").each((function(i,el){if(!empty($(el).val())){var labels=$(el).closest("div").find("label");labels.length&&(labels.hasClass("active")||labels.addClass("active"))}})),$('[data-toggle="modal"]').each((function(i,el){$(el).attr("data-backdrop")||$(el).attr("data-backdrop","true")}))},2e3)}));$.fn.dataTable.ext.errMode="none",$.fn.dataTable.ext.buttons.refresh={extend:"collection",text:'<i class="fas fa-sync"></i>',className:"btn btn-info",action:function(e,dt,node,config){dt.clear().draw(),dt.ajax.reload()}},$("#pkgList").DataTable({destroy:!0,dom:"Bfrtip",processing:!1,serverSide:!1,stateSave:!1,autoWidth:!1,responsive:!0,deferRender:!0,paging:!0,lengthMenu:[5,10,15,20,25,30,100,200,300,400,500,"All"],buttons:["refresh"],ajax:{url:location.href,headers:{Accept:"application/json"},method:"POST",data:{data:"",list:""},dataSrc:function(res){var data_records=[];return(data_records=Array.isArray(res)?res:[res]).forEach((function(v,i){for(const key in v)if(v.hasOwnProperty(key)&&"status"==key){const state="active"==v[key]?"checked":"";v.control=`<form action=""><input type="hidden" value="${v.code}" name="status-pkg"/><input type="hidden" value="${v.code}" name="id"/><div class="switch"> <label> Off <input type="checkbox" ${state} name="status"> <span class="lever"></span> On </label> </div></form>`}})),data_records}},columns:[{data:"code",name:"code"},{data:"name",name:"name"},{data:"price",name:"price"},{data:"status",name:"status"},{data:"control",name:"control"}]}),$("#pkgList").find("label").each((function(){$(this).parent().append($(this).children())})),$("#pkgList .dataTables_filter").find("input").each((function(){const $this=$(this);$this.attr("placeholder","Search"),$this.removeClass("form-control-sm")})),$("#pkgList .dataTables_length").addClass("d-flex flex-row"),$("#pkgList .dataTables_filter").addClass("md-form"),$("#pkgList select").removeClass("custom-select custom-select-sm form-control form-control-sm"),$("#pkgList select").addClass("mdb-select"),$("#pkgList .dataTables_filter").find("label").remove(),$(document).on("change",'[name="status"]',(function(e){var t;$(this).parents("form").submit()})),AjaxForm();