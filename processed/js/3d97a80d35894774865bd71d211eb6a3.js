$(document).ready((function(){setTimeout(()=>{$(".mdb-select").not(".select-wrapper").materialSelect(),$("input,textarea").each((function(i,el){if(!empty($(el).val())){var labels=$(el).closest("div").find("label");labels.length&&(labels.hasClass("active")||labels.addClass("active"))}})),$('[data-toggle="modal"]').each((function(i,el){$(el).attr("data-backdrop")||$(el).attr("data-backdrop","true")}))},2e3)}));smartform(),checkUID();var DT,dataSet=[["-","-","-","-","-"]];function perform_buy(res){if(console.log(res),res.hasOwnProperty("uid")){var form=document.createElement("div"),$form=document.getElementById(res.uid).cloneNode(!0);$form.setAttribute("class","border border-green p-2");var reqid=html.create({tagName:"input",attributes:{type:"hidden",value:res.requestId,name:"requestid"}});$form.appendChild(reqid);var signtrans=html.create({tagName:"input",attributes:{type:"hidden",value:res.signtrans,name:"signtrans"}});$form.appendChild(signtrans),$form.querySelector('[type="submit"]').removeAttribute("disabled"),form.appendChild($form),swal({title:"Gift information",content:form,buttons:{cancel:!0,confirm:!1},closeOnClickOutside:!1,closeOnEsc:!1,dangerMode:!0})}}function datatable_update(res){if("object"==typeof res){dataSet=[];var dataSetBuilder=[];res.hasOwnProperty("result")&&res.result.forEach((function(pkg,index){var builder=[];builder.push(`${pkg.name} (${pkg.category})`),builder.push(pkg.longdesc),builder.push(pkg.quota),builder.push(framework().rp(pkg.price));var paymentMethod=`<form method="post" action="${pkg.check}" data-success="perform_buy"><button type="submit" class="btn btn-info">Check</button></form>${pkg.form}`;pkg.prices.forEach((function(method,i){var via=method.paymentmethod,amount=framework().rp(method.amount);"airtime"==via.toLowerCase()&&(via="PULSA"),paymentMethod+=`${via}: ${amount}<br/>`})),builder.push(paymentMethod),dataSetBuilder.push(builder),dataSet.push(builder),index==res.result.length-1&&(console.log("packages found "+res.result.length,dataSet),DT.clear(),DT.rows.add(dataSet),DT.draw())}))}}$(document).ready((function(){$.fn.dataTable.ext.errMode="none",$(document).on("submit","form",(function(e){e.preventDefault();var t=$(this),data=t.serialize(),url=t.attr("action")||location.href,method=t.attr("method")||"POST";ajx({url:url,method:method,headers:{"unique-id":getUID(),unique_id:getUID(),guid:guid(),Accept:"application/json"},indicator:!0,data:data},t.data("success"))})),DT=$("#DataPkgs").DataTable({destroy:!0,fixedColumns:!0,stateSave:!1,autoWidth:!1,responsive:!0,paging:!0,hideEmptyCols:!0,dom:'<"dt-toolbar">frtip',data:dataSet}),$("#DataPkgs").on("page.dt",(function(){$("html, body").animate({scrollTop:$(".dataTables_wrapper").offset().top},"slow"),$("thead tr th:first-child").focus().blur()})),$(".dataTables_length").addClass("bs-select"),$("div.dt-toolbar").html("")}));