$(document).ready((function(){setTimeout(()=>{$(".mdb-select").not(".select-wrapper").materialSelect(),$("input,textarea").each((function(i,el){if(!empty($(el).val())){var labels=$(el).closest("div").find("label");labels.length&&(labels.hasClass("active")||labels.addClass("active"))}})),$('[data-toggle="modal"]').each((function(i,el){$(el).attr("data-backdrop")||$(el).attr("data-backdrop","true")}))},2e3)}));$(document).on("change",'form[id^="max"]',(function(e){e.preventDefault();var data=$(this).serialize();$.ajax({url:location.href,data:data,method:"post",success:function(res){res.hasOwnProperty("error")&&(res.error||toastr.success("Limitation increased successfully","Limit info"))}})})),$('select[id^="role"]').length&&$('select[id^="role"]').change((function(){var id=$(this).data("id"),value=$(this).val();console.log(id,value),id&&value&&$.post(location.protocol+"//"+location.host+"/user",{change:"role",id:id,value:value},(function(res){res.hasOwnProperty("success")&&res.success&&toastr.success("Role changed successfully".capitalize(),"user management".toUpperCase())}))})),$("form#regist").length&&$("form#regist").submit((function(e){e.preventDefault(),$.post(location.protocol+"//"+location.host+"/signup",$(this).serialize(),(function(res){res&&"object"==typeof res&&res.hasOwnProperty("success")&&res.success&&toastr.success("User created successfully".capitalize(),"user management".toUpperCase())}))})),$('a[href="#change"]').length&&$('a[href="#change"]').click((function(e){e.preventDefault();var id=$(this).data("id");swal({content:{element:"input",attributes:{placeholder:"Type your password",type:"text"}}}).then(value=>{value&&$.post(location.protocol+"//"+location.host+"/user",{change:"password",id:id,value:value},(function(res){res.hasOwnProperty("success")&&res.success&&toastr.success("Password changed successfully","user management")}))})})),$('a[href="#delete"]').length&&$('a[href="#delete"]').click((function(e){e.preventDefault();var id=$(this).data("id");swal({title:"Are you sure?".capitalize(),text:"Once deleted, you will not be able to recover this user!".capitalize(),icon:"warning",buttons:!0,dangerMode:!0}).then(willDelete=>{willDelete?$.post(location.protocol+"//"+location.host+"/user",{id:id,delete:!0},(function(res){swal("Poof! User has been deleted!".capitalize(),{icon:"success"})})):swal("User file is safe!")})})),$("#dtMaterial").length&&$(document).ready((function(){$("#dtMaterial").DataTable({destroy:!0,dom:"Bfrtip",processing:!1,serverSide:!1,stateSave:!1,autoWidth:!1,responsive:!0,deferRender:!0,paging:!0,lengthMenu:[5,10,15,20,25,30,100,200,300,400,500,"All"],buttons:["refresh"]}),$("#dtMaterial_wrapper").add("#pkgList_wrapper").find("label").each((function(){$(this).parent().append($(this).children())})),$("#dtMaterial_wrapper .dataTables_filter").add("#pkgList_wrapper .dataTables_filter").find("input").each((function(){const $this=$(this);$this.attr("placeholder","Search"),$this.removeClass("form-control-sm")})),$("#dtMaterial_wrapper .dataTables_length").add("#pkgList_wrapper .dataTables_length").addClass("d-flex flex-row"),$("#dtMaterial_wrapper .dataTables_filter").add("#pkgList_wrapper .dataTables_filter").addClass("md-form"),$("#dtMaterial_wrapper select").add("#pkgList_wrapper select").removeClass("custom-select custom-select-sm form-control form-control-sm"),$("#dtMaterial_wrapper select").add("#pkgList_wrapper select").addClass("mdb-select"),$("#dtMaterial_wrapper .mdb-select").add("#pkgList_wrapper .mdb-select").materialSelect(),$("#dtMaterial_wrapper .dataTables_filter").add("#pkgList_wrapper .dataTables_filter").find("label").remove()}));